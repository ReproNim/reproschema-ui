(function(){var t={737:function(t){t.exports={githubSrc:"https://raw.githubusercontent.com/ReproNim/demo-protocol/master/DemoProtocol/DemoProtocol_schema",startButton:{en:"Join",es:"Participar"},assetsPublicPath:"/reproschema-ui/",backendServer:null,consent:!0,showHelp:!0,contact:"voice_survey@mit.edu",emailSubject:"Help with Covid19 study"}},8833:function(t,e,s){"use strict";var i=s(5471),a=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[t.bannerMessage||t.showTimer?e("nav",{staticClass:"navbar sticky-top navbar-custom"},[t.bannerMessage?e("b-navbar-nav",{staticClass:"navbar-brand"},[e("b-nav-text",[t._v(t._s(t.$t("banner-message")))])],1):t._e(),t.showTimer?e("div",{staticClass:"timer",attrs:{id:"timer"}},[e("Timer",{attrs:{starttime:"Dec 23, 2020 02:37:25",endtime:t.expiryTime,trans:'{\n            "day":"Day",\n            "hours":"Hours",\n            "minutes":"Minutes",\n            "seconds":"Seconds",\n            "expired":"Please contact the researchers for a new submission link.",\n            "running":"Remaining...",\n            "upcoming":"Till start of study."\n            }'}})],1):t._e()],1):t._e(),e("div",{staticClass:"wrapper"},[e("nav",{ref:"sidebar",attrs:{id:"sidebar"}},[e("div",{staticClass:"sidebar-header"},[e("h4",[t._v(t._s(t.sidebarHeader))])]),e("div",[e("select",{directives:[{name:"model",rawName:"v-model",value:t.selected_language,expression:"selected_language"}],on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selected_language=e.target.multiple?s:s[0]},function(e){return t.setLang(e)}]}},[e("option",{attrs:{disabled:"",value:""}},[t._v("Select Language")]),t._l(t.languageOptions,(function(s){return e("option",{key:s.text,domProps:{value:s.value}},[t._v(" "+t._s(s.text)+" ")])}))],2)]),e("ul",{staticClass:"list-unstyled components"},t._l(t.schemaOrder,(function(s,i){return e("li",{key:i,class:{current:i===parseInt(t.activityIndex)}},[t.visibility[i]?e("a",{class:{current:i===parseInt(t.activityIndex)},on:{click:function(e){return t.setActivity(i)}}},[t.isProtocolUrl?e("circleProgress",{attrs:{radius:20,progress:t.progress[i],stroke:4,strokeColor:"#007bff"}}):t._e(),e("span",{staticClass:"align-middle activityItem"},[t._v(" "+t._s(t.getDisplayName(s))+" ")])],1):t._e()])})),0),e("div",[t.allowExport?e("b-button",{staticClass:"align-middle",attrs:{disabled:!t.isAnswered},on:{click:t.downloadZipData}},[t._v(t._s(t.$t("export-button")))]):t._e()],1)]),e("div",{attrs:{id:"content"}},[e("nav",{staticClass:"navbar navbar-expand-lg navbar-light bg-light"},[e("div",{staticClass:"container-fluid"},[e("b-navbar-nav",[e("button",{staticClass:"btn",attrs:{type:"button",id:"sidebarCollapse"},on:{click:t.toggleSidebar}},[e("span",{staticClass:"navbar-toggler-icon"})])]),e("b-navbar-nav",{staticClass:"float-right"},[t.showHelp?e("a",{staticClass:"nav-link",attrs:{href:"#","data-email":t.getEmailData}},[t._v(t._s(t.$t("help-button")))]):t._e(),e("b-nav-item",{attrs:{to:{name:"Landing",query:t.$route.query},exact:""}},[t._v(t._s(t.$t("home-button")))])],1)],1)]),e("b-container",[e("b-modal",{ref:"invalid-token-modal",attrs:{"ok-only":"",title:"Access denied!","no-close-on-esc":"","no-close-on-backdrop":"","hide-header-close":"","hide-footer":"","header-class":"justify-content-center"},model:{value:t.invalidToken,callback:function(e){t.invalidToken=e},expression:"invalidToken"}},[e("img",{attrs:{src:t.accessDeniedPath,alt:"HTTP 403 Forbidden",width:"100%"}}),e("br"),e("br"),e("p",{staticClass:"contact"},[t._v("Please contact us at "),e("a",{attrs:{href:t.contact,target:"_blank"}},[t._v(t._s(t.contact))])])]),e("router-view",{attrs:{reprotermsUrl:t.reprotermsUrl,srcUrl:t.srcUrl,responses:t.responses[t.activityIndex],selected_language:t.selected_language,ipAddress:t.clientIp,participantID:t.getPId,progress:t.progress[t.activityIndex],autoAdvance:t.checkAdvance,actVisibility:Object.values(t.visibility),nextActivity:t.nextActivity},on:{updateProgress:t.updateProgress,saveResponse:t.saveResponse,saveScores:t.saveScores,clearResponses:t.clearResponses}})],1)],1),e("b-modal",{ref:"my-modal",attrs:{size:"lg","hide-footer":"",title:"Uh-oh! Voice input needs fixing."},model:{value:t.hasError,callback:function(e){t.hasError=e},expression:"hasError"}},[t.notIOS?e("div",[e("p",[t._v(t._s(t.$t("permission-change-notification")))]),e("br"),e("img",{attrs:{src:t.permissionDemoPath,alt:"allow media permission",width:"100%"}}),e("br"),e("p",[t._v(t._s(t.$t("permission-refresh")))])]):e("div",[e("p",[t._v(t._s(t.$t("safari-notification")))])])])],1)])},r=[],n=(s(4114),s(4979),s(8292)),o=s(1250),l=s(6880),c=s.n(l),h=s(5093),u=s.n(h),p=s(2543),d=s.n(p),m=s(1710),g=s.n(m),v=s(4526),b=s(2438),y=s.n(b),f=s(4213),w=(s(9313),function(){var t=this,e=t._self._c;return e("svg",{attrs:{height:2*t.radius,width:2*t.radius}},[e("circle",{attrs:{stroke:"lightgray","stroke-width":t.stroke,fill:"transparent",r:t.normalizedRadius,cx:t.radius,cy:t.radius}}),e("circle",{style:{strokeDashoffset:t.strokeDashoffset},attrs:{stroke:t.strokeColor,"stroke-dasharray":t.circumference+" "+t.circumference,"stroke-width":t.stroke,fill:"transparent",r:t.normalizedRadius,cx:t.radius,cy:t.radius}})])}),_=[],x={props:{radius:Number,progress:Number,stroke:Number,strokeColor:String},data(){const t=this.radius-2*this.stroke,e=2*t*Math.PI;return{normalizedRadius:t,circumference:e}},computed:{strokeDashoffset(){return this.circumference-this.progress/100*this.circumference}}},k=x,$=s(1656),S=(0,$.A)(k,w,_,!1,null,null,null),C=S.exports,A=function(){var t=this,e=t._self._c;return e("div",["expired"!==t.statusType?e("div",[e("div",{staticClass:"day"},[e("span",{staticClass:"number"},[t._v(t._s(t.days))]),e("div",{staticClass:"format"},[t._v(t._s(t.wordString.day))])]),e("div",{staticClass:"hour"},[e("span",{staticClass:"number"},[t._v(t._s(t.hours))]),e("div",{staticClass:"format"},[t._v(t._s(t.wordString.hours))])]),e("div",{staticClass:"min"},[e("span",{staticClass:"number"},[t._v(t._s(t.minutes))]),e("div",{staticClass:"format"},[t._v(t._s(t.wordString.minutes))])]),e("div",{staticClass:"sec"},[e("span",{staticClass:"number"},[t._v(t._s(t.seconds))]),e("div",{staticClass:"format"},[t._v(t._s(t.wordString.seconds))])])]):t._e(),e("div",{staticClass:"message",class:t.statusType},[t._v(t._s(t.message))])])},I=[],P=s(737),j=s.n(P),D={name:"Timer",props:["starttime","endtime","trans"],data(){return{timer:"",wordString:{},start:"",end:"",interval:"",days:"",minutes:"",hours:"",seconds:"",message:"",statusType:""}},created:function(){this.wordString=JSON.parse(this.trans)},mounted(){this.start=new Date(this.starttime).getTime(),this.end=new Date(this.endtime).getTime(),this.timerCount(this.start,this.end),this.interval=setInterval((()=>{this.timerCount(this.start,this.end)}),1e3)},computed:{timeoutMessage(){return this.$t("timeout-message")}},methods:{timerCount(t,e){var s=(new Date).getTime(),i=t-s,a=e-s;if(i<0&&a<0)return this.message=`${this.timeoutMessage} ${j().contact}`,this.statusType="expired",void clearInterval(this.interval);i<0&&a>0?(this.calcTime(a),this.message=this.wordString.running,this.statusType="running"):i>0&&a>0&&(console.log(84),this.calcTime(i),this.message=this.wordString.upcoming,this.statusType="upcoming")},calcTime:function(t){this.days=Math.floor(t/864e5),this.hours=Math.floor(t%864e5/36e5),this.minutes=Math.floor(t%36e5/6e4),this.seconds=Math.floor(t%6e4/1e3)}}},O=D,R=(0,$.A)(O,A,I,!1,null,"e52dacec",null),T=R.exports,U=s(4765);function M(){const t=s(5432),e={};return t.keys().forEach((s=>{const i=s.match(/([A-Za-z0-9-_]+)\./i);if(i&&i.length>1){const a=i[1];j().startButton instanceof Object?t(s)["join-button"]=j().startButton[a]:t(s)["join-button"]=j().startButton,j().banner instanceof Object?t(s)["banner-message"]=j().banner[a]:t(s)["banner-message"]=j().banner,e[a]=t(s)}})),e}i["default"].use(U.A);var L=new U.A({locale:"en",fallbackLocale:"en",messages:M()});i["default"].use(n.Ay$),i["default"].filter("reverse",(t=>t.slice().reverse()));const N=s(8651);function E(t){const e=t.split("/"),s=e.length,i=e[s-1].split(".")[0];return i}class V{constructor(t="[data-email]"){this.selector=t,this.initialize()}mailto(t){window.location.href=`mailto:${atob(t)}`}bindEvents(){document.querySelectorAll(this.selector).forEach((t=>{t.addEventListener("click",(()=>{this.mailto(t.getAttribute("data-email"))}))}))}initialize(){this.bindEvents()}}var q={name:"App",components:{circleProgress:C,Timer:T},data(){return{sidebarActive:!0,selected_language:"",sidebarHeader:"",visibility:{},displayNames:{},labelMap:{},langMap:{},cache:{},isAnswered:!1,clientIp:"",reproterms2:"",protocolUrl:j().githubSrc,content:{},startButton:j().startButton,showHelp:j().showHelp,bannerMessage:j().banner,contact:j().contact,audioConstraints:{audio:!0,video:!1},hasError:!1,browserType:"",clientSpecs:{},invalidToken:!1}},methods:{initialize(t){this.mediaRecorder=new N(t)},error(){this.hasError=!0,this.supported=!1},checkPermission(){void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=t=>{const e=navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return e?new Promise(((s,i)=>{e.call(navigator,t,s,i)})):(this.supported=!1,Promise.reject(new Error("getUserMedia is not implemented in this browser")))}),navigator.mediaDevices.getUserMedia?(this.supported=!0,navigator.mediaDevices.getUserMedia(this.audioConstraints).then(this.initialize,this.error)):this.supported=!1},setLang(t){L.locale=t.target.value},toggleSidebar(){this.$refs.sidebar.className.indexOf("active")<0?this.$refs.sidebar.className="active":this.$refs.sidebar.className=""},getVariableName(t,e){const s=e,i={};return d().map(s,(t=>{const e=t["http://schema.repronim.org/isAbout"][0]["@id"],s=t["http://schema.repronim.org/variableName"][0]["@value"];i[e]=s})),i[t]},setActivity(t){!this.checkDisableBack&&this.isProtocolUrl&&(this.$route.query.url?this.$router.push(`/activities/${t}?url=${this.$route.query.url}`):this.$router.push(`/activities/${t}`))},updateProgress(t){this.checkProgressDiff(this.progress[this.activityIndex],t),this.$store.dispatch("updateProgress",t),this.$forceUpdate()},checkProgressDiff(t,e){t!==e&&100===e&&this.setVisbility()},saveResponse(t,e){let s=!1;this.currentResponse[t]!==e[0]&&100===this.progress[this.activityIndex]&&(s=!0),e[1].hasOwnProperty("used")&&e[1].used.push(this.protocolUrl),this.$store.dispatch("saveResponse",{key:t,value:e}),s&&this.setVisbility(),this.isAnswered=!0},saveScores(t,e){this.$store.dispatch("saveScores",{key:t,scoreObj:e})},clearResponses(){this.$store.dispatch("clearResponses",this.activityIndex),this.$forceUpdate()},getDisplayName(t){if(!d().isEmpty(this.$store.state.schema)){let e=this.labelMap[t];if(this.$store.state.schema["http://schema.repronim.org/addProperties"][0]["http://www.w3.org/2004/02/skos/core#prefLabel"]){const s=this.$store.state.schema["http://schema.repronim.org/addProperties"],i=d().filter(s,(e=>e["http://schema.repronim.org/isAbout"][0]["@id"]===t));e=i[0]["http://www.w3.org/2004/02/skos/core#prefLabel"];const a=d().filter(e,(t=>t["@language"]===this.selected_language));return Array.isArray(a)&&a.length?a[0]["@value"]:e[0]["@value"]}const s=d().filter(e,(t=>t["@language"]===this.selected_language));return Array.isArray(s)&&s.length?s[0]["@value"]:e}return""},evaluateString(t,e){const s=Object.keys(e);let i=t,a=!1;return d().map(s,(t=>{let s=e[t].val;if(void 0!==s)if("skipped"!==s&&"dontknow"!==s){d().isString(s)&&(s=`'${s}'`),d().isArray(s)&&(s=`[${s}]`);let e=i;i=i.replaceAll(new RegExp(`\\b${t}\\b`||`\\b${t}\\.`,"g"),s),e!==i&&(a=!0)}else{let e=i;i=i.replaceAll(new RegExp(`\\b${t}\\b`,"g"),0),e!==i&&(a=!0)}})),!!a&&Function("return "+i)()},responseMapper(t,e,s){let i=[];if(this.schema["http://schema.repronim.org/addProperties"]){const t=this.schema["http://schema.repronim.org/addProperties"];if(Object.entries(t).forEach((([t,a])=>{const r=a["http://schema.repronim.org/isAbout"][0]["@id"],n=a["http://schema.repronim.org/variableName"][0]["@value"];r in s&&Object.entries(s[r]).forEach((([t,e])=>{const s="".concat(n,".",t);i.push({qId:s,val:e["val"],key:e["ref"]})}));const o=d().filter(e,(t=>r in t));let l=o[0];o[0]&&(l=o[0][r]),i.push({key:r,val:l,qId:n})})),this.$store.getters.getQueryParameters){const t=this.$store.getters.getQueryParameters;Object.entries(t).forEach((([t,e])=>{const s=t;"week"===t&&(e=parseInt(e));const a=e;i.push({key:t,val:a,qId:s})}))}const a={};return d().map(i,(t=>{a[t.qId]={val:t.val,ref:t.key}})),a}return{}},getPrefLabel(){const t=this.$store.state.schema;let e=d().filter(t["http://www.w3.org/2004/02/skos/core#prefLabel"],(t=>t["@language"]===this.selected_language));e.length||(e=t["http://www.w3.org/2004/02/skos/core#prefLabel"]),this.sidebarHeader=e[0]["@value"],this.schemaOrder&&d().map(this.schemaOrder,(t=>{y().expand(t).then((e=>{this.labelMap[t]=e[0]["http://www.w3.org/2004/02/skos/core#prefLabel"]}))}))},async computeVisibilityCondition(t,e){if(d().isObject(t)){const s={method:t.method,url:t.url,data:t.payload,headers:{"content-type":"application/json"}},i=JSON.stringify(s);if(Object.keys(this.cache).indexOf(i)>-1)return this.cache[i];null!=this.visibility[e]&&void 0!==this.visibility[e]||(this.visibility[e]=!1);const a=await(0,o.A)(s);return this.cache[i]=a.data.qualified,a.data.qualified}if(d().isString(t)){const s=this.responseMapper(e,this.$store.state.responses,this.$store.state.responseMap),i=this.evaluateString(t,s);return i}return t},visibilityChain(t){return t[0]?this.computeVisibilityCondition(t[0].condition,t[0].index).then((e=>{this.visibility[t[0].index]=e,this.$forceUpdate();const s=[...t];s.shift(),this.visibilityChain(s)})):0},setVisbility(){const t=d().map(this.visibilityConditions,((t,e)=>({condition:t,index:e})));this.visibilityChain(t)},downloadZipData(){const t=this.$store.state.exportResponses,e=this.$store.state.scores,s=this.$store.state.participantId,i={response:t,scores:e,participantId:s};this.formatData(i)},formatData(t){const e=new(g());let s=0;const i=`${(0,v.A)()}-${this.participantId}`;d().map(t.response,(t=>{const a=[];d().map(t,(t=>{const s={...t};if("reproschema:Response"===t["@type"]&&t.value instanceof Blob){const a=t.isAbout.split("/"),r=t["@id"].split("uuid:")[1];e.folder(i).file(`${a[a.length-1]}-${r}.wav`,t.value),s.value=`${a[a.length-1]}-${r}.wav`}a.push(s)})),a.length&&(e.folder(i).file(`activity_${s}.jsonld`,JSON.stringify(a,null,4)),s+=1)})),e.generateAsync({type:"blob"}).then((t=>{(0,f.saveAs)(t,`${i}.zip`)}))}},watch:{$route(){void 0!==this.$route.params.id&&this.$store.dispatch("setActivityIndex",this.$route.params.id)},visibilityConditions:{handler(t){d().isEmpty(t)||this.setVisbility()},deep:!0}},created(){const t=this.$route.query.url;t&&(this.protocolUrl=t),this.$store.dispatch("getBaseSchema",t).then((()=>this.getPrefLabel()))},mounted(){new V("[data-email]"),this.clientSpecs=JSON.stringify(c().parse(window.navigator.userAgent)),this.browserType=c().parse(window.navigator.userAgent).browser.name,j().checkMediaPermission&&this.checkPermission(),this.$route.query.lang?(this.selected_language=this.$route.query.lang,L.locale=this.selected_language):this.selected_language="en",this.$route.query.uid?this.$store.dispatch("saveParticipantId",this.$route.query.uid):j().generateRandomUid&&this.$store.dispatch("saveParticipantId",(0,v.A)()),this.$route.params.id&&this.$store.dispatch("setActivityIndex",this.$route.params.id),o.A.get("https://raw.githubusercontent.com/ReproNim/reproschema-library/master/resources/languages.json").then((t=>{this.langMap=t.data})),this.$store.dispatch("setParticipantUUID",(0,v.A)()),this.$route.query.expiry_time&&this.$store.dispatch("setExpiryMinutes",this.$route.query.expiry_time),this.$route.query.auth_token&&this.$store.dispatch("setAuthToken",this.$route.query.auth_token),d().isEmpty(this.$route.query)||this.$store.dispatch("setQueryParameters",this.$route.query)},computed:{accessDeniedPath(){let t=s(400);return t},notIOS(){return"iOS"!==c().parse(window.navigator.userAgent).os.name},permissionDemoPath(){let t=s(6425);return"Firefox"===this.browserType?t=s(2370):"Safari"===this.browserType&&(t=s(1823)),t},expiryTime(){let t=u()(this.$store.getters.getExpiryTime)["_i"];return t=t.replace(" ","+"),new Date(t).getTime()},showTimer(){return!!this.$store.getters.getExpiryTime},getEmailData(){const t=`${j().contact}?subject=${j().emailSubject}&body=[ Describe the issue in detail. You can copy and paste text, screen capture and/or describe the expected vs. actual result.] Browser properties: ${this.clientSpecs}]`;return window.btoa(t)},getschemaType(){return this.$store.getters.getschemaType},isProtocolUrl(){return"Activity"!==this.getschemaType},srcUrl(){return this.$store.getters.srcUrl},reprotermsUrl(){return this.$store.getters.getTermsUrl},schema(){return this.$store.state.schema},responses(){return this.$store.state.responses},scores(){return this.$store.state.scores},activityIndex(){return this.$store.state.activityIndex},progress(){return this.$store.state.progress},currentActivityProgress(){return this.progress[this.activityIndex]},currentResponse(){return this.responses[this.activityIndex]},schemaOrder(){if(!d().isEmpty(this.$store.state.schema)){const t=d().map(this.$store.state.schema["http://schema.repronim.org/order"][0]["@list"],(t=>t["@id"]));return t}return[]},languageOptions(){if(!d().isEmpty(this.$store.state.schema)){const t=d().map(this.$store.state.schema["http://www.w3.org/2004/02/skos/core#prefLabel"],(t=>t["@language"])),e=d().map(t,(t=>({value:t,text:this.langMap[t]})));return e}return[]},shouldUpload(){return!(!j().backendServer||!this.$store.getters.getAuthToken)},allowExport(){if(!d().isEmpty(this.$store.state.schema)&&this.$store.state.schema["http://schema.repronim.org/allow"]){const t=d().map(this.$store.state.schema["http://schema.repronim.org/allow"],(t=>t["@id"]));return this.$store.dispatch("setExport",t.includes("http://schema.repronim.org/AllowExport")),t.includes("http://schema.repronim.org/AllowExport")||!this.shouldUpload}return this.$store.dispatch("setExport",!1),!1},schemaNameMapper(){const t={};return this.schemaOrder&&d().map(this.schemaOrder,(e=>{let s="";s=this.schema["http://schema.repronim.org/variableMap"]?this.getVariableName(e,this.schema["http://schema.repronim.org/variableMap"]):E(e),t[s]=e})),t},visibilityConditions(){return this.schema["http://schema.repronim.org/addProperties"]?d().map(this.schemaOrder,(t=>{const e=this.schema["http://schema.repronim.org/addProperties"],s=d().filter(e,(e=>e["http://schema.repronim.org/isAbout"][0]["@id"]===t));let i=d().filter(s[0]["http://schema.repronim.org/variableName"],(t=>t["@language"]===this.selected_language));if(i.length||(i=s[0]["http://schema.repronim.org/variableName"]),s[0]["http://schema.repronim.org/isVis"]){const t=s[0]["http://schema.repronim.org/isVis"][0];if("@value"in t)return t["@value"];if("http://schema.org/httpMethod"in t&&"http://schema.org/url"in t&&"http://schema.repronim.org/payload"in t){const e={},s=t["http://schema.repronim.org/payload"];return d().map(s,(t=>{const s=t["@value"],i=this.schemaOrder.indexOf(this.schemaNameMapper[s]);e[this.schemaNameMapper[s]]=this.scores[i]})),{url:t["http://schema.org/url"][0]["@value"],method:t["http://schema.org/httpMethod"][0]["@value"],payload:e}}}return!0})):d().mapValues(this.schemaOrder,(()=>!0))},checkDisableBack(){if(!d().isEmpty(this.$store.state.schema)&&this.$store.state.schema["http://schema.repronim.org/allow"]){const t=d().map(this.$store.state.schema["http://schema.repronim.org/allow"],(t=>t["@id"]));return t.includes("http://schema.repronim.org/DisableBack")}return!1},getPId(){return this.$store.getters.getParticipantId},checkAdvance(){if(!d().isEmpty(this.$store.state.schema)&&this.$store.state.schema["http://schema.repronim.org/allow"]){const t=d().map(this.$store.state.schema["http://schema.repronim.org/allow"],(t=>t["@id"]));return t.includes("http://schema.repronim.org/AutoAdvance")}return!1},nextActivity(){const t={};for(let e=0;e<this.schemaOrder.length-1;e+=1)t[this.schemaOrder[e]]=this.schemaOrder[e+1];return t},participantId(){return this.$store.getters.getParticipantId}}},F=q,z=(0,$.A)(F,a,r,!1,null,null,null),K=z.exports,B=s(173),H=function(){var t=this,e=t._self._c;return e("div",{staticClass:"hello"},[t.listShow.length?e("div",[t.complete&&t.autoAdvance?e("div",{staticClass:"text-center"},[t.isVis?e("div",[t.complete&&t.currentActivityIndex<t.listShow.length?e("p",[t._v(" "+t._s(t.$t("review-and-next")))]):t._e(),t.nextActivity[t.activityUrl]?e("b-button",{attrs:{variant:"danger"},on:{click:t.nextActivity1}},[t._v(t._s(t.$t("next-button")))]):t._e()],1):e("div",[e("p",[t._v("Thank you for participating. Not eligible at this time!")])])]):t._e(),e("br"),e("b-progress",{staticClass:"mb-3",attrs:{value:t.progress,max:100}}),t.preambleText?e("div",{staticClass:"preamble-text"},[e("strong",{domProps:{innerHTML:t._s(t.preambleText)}},[t._v(t._s(t.preambleText))])]):t._e()],1):e("div",[e("h1",[t._v(t._s(t.$t("loader"))+"...")]),e("Loader")],1),e("transition-group",{attrs:{name:"list",tag:"div",mode:"in-out"}},t._l(t.contextReverse,(function(s,i){return e("div",{key:s["@id"]+"f"+i,staticClass:"mt-3 mb-3"},[e("transition",{key:"t"+s["@id"],attrs:{name:"list"}},[t.shouldShow[i]?e("survey-item",{key:"c"+s["@id"],attrs:{item:s,index:t.contextReverse.length-i-1,init:t.responses[s["@id"]],responses:t.responses,selected_language:t.selected_language,clientIp:t.ipAddress,showPassOptions:t.findOverallPassOptions,individualPassList:t.individualPassList,reprotermsUrl:t.reprotermsUrl},on:{skip:function(e){return t.nextQuestion(t.contextReverse.length-i-1,1,0)},dontKnow:function(e){return t.nextQuestion(t.contextReverse.length-i-1,0,1)},next:function(e){return t.nextQuestion(t.contextReverse.length-i-1,0)},setData:t.setResponse,setScores:t.setScore}}):t._e()],1)],1)})),0)],1)},Q=[],Y=function(){var t=this,e=t._self._c;return e("b-card",{staticClass:"text-center question mx-auto w-100",style:t.style,attrs:{"border-variant":t.variant,"no-body":"multipart"===t.ui||"section"===t.ui}},[e("div",{staticClass:"contextItem align-self-center center w-100"},[e("transition",{attrs:{name:"fade",mode:"out-in"}},["ready"===t.status&&"multipart"!==t.ui&&"section"!==t.ui?e("InputSelector",{attrs:{inputType:t.ui,readOnly:t.widgetType,title:t.title,preamble:t.itemPreamble,valueConstraints:t.valueConstraints,fieldData:t.fieldData,init:t.init,responses:t.responses,selected_language:t.selected_language,reprotermsUrl:t.reprotermsUrl,ipAddress:t.clientIp,showPassOptions:t.showPassOptions,showItemPassOptions:t.itemAllow},on:{skip:t.sendSkip,dontKnow:t.sendDontKnow,next:t.sendNext,valueChanged:t.sendData}}):"ready"!==t.status?e("div",{staticClass:"loader"},[e("Loader")],1):"multipart"===t.ui?e("multipart",{attrs:{progress:t.mp_progress,responses:t.mp_responses,srcUrl:t.item["@id"],showPassOptions:t.showPassOptions,selected_language:t.selected_language,reprotermsUrl:t.reprotermsUrl,ipAddress:t.clientIp},on:{skip:t.sendSkip,dontKnow:t.sendDontKnow,next:t.sendNext,valueChanged:t.sendDataAndGoNext,saveResponse:t.setMPResponse,saveScores:t.setScore,updateProgress:t.setMPProgress,clearResponses:t.clearMPResponses}}):"section"===t.ui?e("subactivity",{attrs:{progress:t.mp_progress,responses:t.mp_responses,srcUrl:t.item["@id"],showPassOptions:t.showPassOptions,selected_language:t.selected_language,reprotermsUrl:t.reprotermsUrl,ipAddress:t.clientIp},on:{skip:t.sendSkip,dontKnow:t.sendDontKnow,next:t.sendNext,valueChanged:t.sendData,saveResponse:t.setMPResponse,saveScores:t.setScore,updateProgress:t.setMPProgress,clearResponses:t.clearMPResponses}}):t._e()],1)],1)])},J=[],Z=function(){var t=this,e=t._self._c;return e("div",{staticClass:"inputContent"},[t.preamble?e("div",{staticClass:"lead scroll mb-3 pr-3 pl-3"},[e("p",{class:{"text-justify":"audioPassageRecord"===t.inputType},domProps:{innerHTML:t._s(t.preamble)}},[t._v(t._s(t.preamble))])]):t._e(),t.title?e("div",{staticClass:"lead scroll mb-3 pr-3 pl-3"},[e("p",{class:{"text-justify":"audioPassageRecord"===t.inputType},domProps:{innerHTML:t._s(t.title)}},[t._v(t._s(t.title))]),t.valueConstraints.requiredValue?e("span",{staticClass:"text-danger"},[t._v("*")]):t._e()]):e("b-alert",{attrs:{variant:"danger",show:""}},[t._v(" "+t._s(t.$t("input-selector-alert"))+" ")]),"radio"===t.inputType?e("div",[e("Radio",{attrs:{constraints:t.valueConstraints,selected_language:t.selected_language,reprotermsUrl:t.reprotermsUrl,init:t.init},on:{valueChanged:t.sendData}})],1):"audioCheck"===t.inputType||"audioRecord"===t.inputType||"audioPassageRecord"===t.inputType?e("div",[e("AudioRecord",{attrs:{constraints:t.valueConstraints,selected_language:t.selected_language,init:t.init},on:{valueChanged:t.sendData}})],1):"audioImageRecord"===t.inputType?e("div",[e("AudioRecord",{attrs:{constraints:t.valueConstraints,fieldData:t.fieldData,selected_language:t.selected_language,init:t.init,mode:"audioImageRecord"},on:{valueChanged:t.sendData}})],1):"audioRecordNumberTask"===t.inputType?e("div",[e("AudioRecord",{attrs:{constraints:t.valueConstraints,selected_language:t.selected_language,init:t.init,mode:"audioRecordNumberTask"},on:{valueChanged:t.sendData}})],1):"audioRecordAudioTask"===t.inputType?e("div",[e("AudioRecord",{attrs:{constraints:t.valueConstraints,selected_language:t.selected_language,init:t.init,fieldData:t.fieldData,mode:"audioRecordAudioTask"},on:{valueChanged:t.sendData}})],1):"audioRecordNoStop"===t.inputType?e("div",[e("AudioRecord",{attrs:{constraints:t.valueConstraints,selected_language:t.selected_language,init:t.init,mode:"audioRecordNoStop"},on:{valueChanged:t.sendData}})],1):"text"===t.inputType?e("div",[e("TextInput",{attrs:{constraints:t.valueConstraints,inputType:t.inputType,selected_language:t.selected_language,init:t.init},on:{valueChanged:t.sendData}})],1):"textarea"===t.inputType?e("div",[e("TextArea",{attrs:{constraints:t.valueConstraints,inputType:t.inputType,selected_language:t.selected_language,init:t.init},on:{valueChanged:t.sendData}})],1):"pid"===t.inputType?e("div",[e("ParticipantId",{attrs:{constraints:t.valueConstraints,selected_language:t.selected_language,init:t.init},on:{valueChanged:t.sendData}})],1):"email"===t.inputType?e("div",[e("EmailInput",{attrs:{constraints:t.valueConstraints,selected_language:t.selected_language,init:t.init},on:{valueChanged:t.sendData}})],1):"timeRange"===t.inputType?e("div",[e("TimeRange",{attrs:{constraints:t.valueConstraints,selected_language:t.selected_language,id:"timeRange"+Math.floor(1e3*Math.random()),init:t.init},on:{valueChanged:t.sendData}})],1):"multitext"===t.inputType?e("div",[e("MultiTextInput",{attrs:{constraints:t.valueConstraints,init:t.init},on:{valueChanged:t.sendData}})],1):"number"===t.inputType?e("div",[e("IntegerInput",{attrs:{constraints:t.valueConstraints,selected_language:t.selected_language,init:t.init},on:{valueChanged:t.sendData}})],1):"float"===t.inputType?e("div",[e("FloatInput",{attrs:{constraints:t.valueConstraints,selected_language:t.selected_language,init:t.init},on:{valueChanged:t.sendData}})],1):"range"===t.inputType?e("div",[e("RangeInput",{attrs:{constraints:t.valueConstraints,selected_language:t.selected_language,init:t.init},on:{valueChanged:t.sendData}})],1):"date"===t.inputType||"year"===t.inputType?e("div",[e("DateInput",{attrs:{constraints:t.valueConstraints,inputType:t.inputType,selected_language:t.selected_language,init:t.init},on:{valueChanged:t.sendData}})],1):"documentUpload"===t.inputType?e("div",[e("DocumentUpload",{attrs:{constraints:t.valueConstraints,selected_language:t.selected_language,init:t.init},on:{valueChanged:t.sendData}})],1):"slider"===t.inputType?e("div",[e("SliderInput",{attrs:{constraints:t.valueConstraints,selected_language:t.selected_language,init:t.init},on:{valueChanged:t.sendData}})],1):"selectCountry"===t.inputType||"selectState"===t.inputType||"selectLanguage"===t.inputType||"select"===t.inputType?e("div",[e("SelectInput",{attrs:{constraints:t.valueConstraints,selected_language:t.selected_language,reprotermsUrl:t.reprotermsUrl,inputType:t.inputType,init:t.init},on:{valueChanged:t.sendData}})],1):"static"===t.inputType&&t.readOnly?e("div",[e("StaticReadOnly",{attrs:{constraints:t.valueConstraints,selected_language:t.selected_language,result:!0,input:t.title,init:t.init},on:{valueChanged:t.sendData}})],1):"save"===t.inputType?e("div",[e("SaveData",{attrs:{constraints:t.valueConstraints,selected_language:t.selected_language,ipAddress:t.ipAddress,init:t.init},on:{valueChanged:t.sendData}})],1):"sign"===t.inputType?e("div",[e("StudySign",{attrs:{constraints:t.valueConstraints,selected_language:t.selected_language,result:!0,init:t.init},on:{valueChanged:t.sendData}})],1):e("div",[e("b-alert",{attrs:{show:""}},[t._v(' no input type UI built for "'+t._s(t.inputType)+'" yet! ')])],1),null!==t.showPassOptions||null!==t.showItemPassOptions?e("div",[t.showItemPassOptions&&t.showItemPassOptions["dontKnow"]||t.showPassOptions&&t.showPassOptions["dontKnow"]?e("b-button",{attrs:{variant:"default"},on:{click:t.dontKnow}},[t._v(" "+t._s(t.$t("dont-know"))+" ")]):t._e(),t.showItemPassOptions&&t.showItemPassOptions["skip"]||t.showPassOptions&&t.showPassOptions["skip"]?e("b-button",{attrs:{variant:"default"},on:{click:t.skip}},[t._v(" "+t._s(t.$t("skip"))+" ")]):t._e()],1):t._e()],1)},G=[],W=function(){var t=this,e=t._self._c;return e("div",{staticClass:"radioInput container ml-3 pl-3"},[t.isMultipleChoice?e("div",[e("b-form",{on:{submit:t.onSubmit}},[e("b-form-group",{attrs:{label:""}},[e("b-form-checkbox-group",{ref:"checkboxbutton",staticClass:"text-left",attrs:{stacked:"",plain:""},model:{value:t.checkboxSelected,callback:function(e){t.checkboxSelected=e},expression:"checkboxSelected"}},t._l(t.options,(function(s){return e("b-form-checkbox",{key:s.value,staticClass:"mb-3",attrs:{value:s.value}},[t._v(" "+t._s(s.text)+" ")])})),1)],1),e("b-btn",{attrs:{type:"submit"}},[t._v(t._s(t.$t("submit-button")))])],1)],1):e("div",[t.isImageSelect?e("div",{staticClass:"text-center"},[e("vue-select-image",{ref:"imageSelect",attrs:{dataImages:t.dataImages,selectedImages:t.selectedImages,useLabel:""},on:{onselectimage:t.onSelectImage}})],1):e("b-form-group",{attrs:{label:""}},[e("b-form-radio-group",{ref:"radiobutton",staticClass:"text-left",attrs:{stacked:""},on:{change:t.sendData},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},t._l(t.options,(function(s){return e("b-form-radio",{key:s.value,staticClass:"mb-3",attrs:{value:s.value}},[t._v(" "+t._s(s.text)+" ")])})),1)],1)],1)])},X=[],tt=function(){var t=this,e=t._self._c;return e("div",{class:t.rootClass},[e("ul",{class:t.rootClass+"__wrapper"},t._l(t.dataImagesLocal,(function(s,i){return e("li",{key:i,class:t.rootClass+"__item"},[t.isMultiple?t._e():e("div",{class:t.classThumbnail[i],on:{click:function(e){return t.onSelectImage(s)}}},[e("img",{class:t.rootClass+"__img",attrs:{src:s.src,alt:s.alt,height:t.h,width:t.w}}),t.useLabel?e("label",{class:t.rootClass+"__lbl"},[t._v(" "+t._s(s.alt)+" ")]):t._e()]),t.isMultiple?e("div",{class:t.classThumbnailMultiple(s.id),on:{click:function(e){return t.onSelectMultipleImage(s)}}},[e("img",{class:t.rootClass+"__img",attrs:{src:s.src,alt:s.alt,height:t.h,width:t.w}}),t.useLabel?e("label",{class:t.rootClass+"__lbl"},[t._v(" "+t._s(s.alt)+" ")]):t._e()]):t._e()])})),0)])},et=[],st={name:"vue-select-image",props:{dataImages:{type:Array,default:()=>[]},selectedImages:{type:Array,default:()=>[]},isMultiple:{type:Boolean,default:!1},useLabel:{type:Boolean,default:!1},rootClass:{type:String,default:"vue-select-image"},activeClass:{type:String,default:"--selected"},h:{type:String,default:"auto"},w:{type:String,default:"auto"}},data(){return{singleSelected:{id:""},multipleSelected:[]}},watch:{},computed:{dataImagesLocal:function(){return this.dataImages||[]},classThumbnail(){return d().map(this.dataImagesLocal,(t=>{const e=`${this.rootClass}__thumbnail`;return this.singleSelected.id===t.id?`${e} ${e}${this.activeClass}`:`${e}`}))}},mounted(){this.setInitialSelection()},methods:{classThumbnailMultiple(t){const e=`${this.rootClass}__thumbnail`,s=`${e} is--multiple`;return this.isExistInArray(t)?`${s} ${e}${this.activeClass}`:`${s}`},onSelectImage(t){this.singleSelected=Object.assign({},this.singleSelected,t),this.$emit("onselectimage",t)},isExistInArray(t){return this.multipleSelected.find((e=>t===e.id))},removeFromSingleSelected(){this.singleSelected={},this.$emit("onselectimage",{})},removeFromMultipleSelected(t,e){this.multipleSelected=this.multipleSelected.filter((e=>t!==e.id)),e||this.$emit("onselectmultipleimage",this.multipleSelected)},resetMultipleSelection(){this.multipleSelected=[]},onSelectMultipleImage(t){this.isExistInArray(t.id)?this.removeFromMultipleSelected(t.id,!0):this.multipleSelected.push(t),this.$emit("onselectmultipleimage",this.multipleSelected)},setInitialSelection(){this.selectedImages&&(this.isMultiple||1!==this.selectedImages.length?this.multipleSelected=[].concat(this.selectedImages):(this.singleSelected=Object.assign({},this.selectedImages[0]),this.$forceUpdate()))}}},it=st,at=(0,$.A)(it,tt,et,!1,null,null,null),rt=at.exports,nt={name:"radioInput",props:["constraints","init","selected_language","reprotermsUrl"],data(){return{selected:null,checkboxSelected:[],answerLanguage:this.selected_language}},components:{VueSelectImage:rt},computed:{options(){let t="";return d().map(this.constraints["http://schema.repronim.org/choices"],(e=>{const s=d().filter(e["http://schema.org/name"],(t=>t["@language"]===this.selected_language));return t=Array.isArray(s)&&s.length?s[0]["@value"]:e["http://schema.org/name"][0]["@value"],{text:t,value:e["http://schema.repronim.org/value"][0]["@value"],image:e["http://schema.org/image"]?e["http://schema.org/image"][0]["@value"]:null}}))},isMultipleChoice(){return!!this.constraints["http://schema.repronim.org/multipleChoice"]&&this.constraints["http://schema.repronim.org/multipleChoice"][0]["@value"]},isImageSelect(){return d().filter(this.options,(t=>t.image)).length===this.options.length},dataImages(){return d().map(this.options,(t=>({src:t.image,id:t.value,alt:t.text})))},selectedImages(){return[this.dataImages[this.selected]]}},watch:{},mounted(){void 0!==this.init&&(this.init instanceof Array?this.checkboxSelected=this.init:this.selected=this.init,this.$refs.imageSelect&&this.$nextTick((()=>{this.selectedImages[0]&&this.$set(this.$refs.imageSelect,"singleSelected",this.selectedImages[0])})))},methods:{onSubmit(t){t.preventDefault(),this.$emit("valueChanged",this.checkboxSelected)},sendData(t){this.$emit("valueChanged",t)},onSelectImage(t){this.selected=t.id,this.sendData(t.id)}}},ot=nt,lt=(0,$.A)(ot,W,X,!1,null,null,null),ct=lt.exports,ht=function(){var t=this,e=t._self._c;return e("div",[e("b-alert",{attrs:{show:!t.supported}},[t._v(t._s(t.$t("audio-support-msg")))]),t.supported?e("div",["audioImageRecord"===t.mode?e("div",{staticClass:"mb-3"},[e("img",{staticClass:"img-fluid",attrs:{src:t.fieldData["http://schema.org/image"][0]["@id"]}})]):t._e(),"audioRecordNumberTask"===t.mode?e("div",{staticClass:"mb-3"},[e("strong",{staticStyle:{"font-size":"30px"}},[t._v(t._s(t.generateNumber))])]):t._e(),"audioRecordAudioTask"===t.mode?e("div",{staticClass:"mb-3"},[e("audio",{attrs:{controls:""}},[e("source",{attrs:{src:t.getAudioSource,type:"audio/mpeg"}}),t._v(" Your browser does not support the audio element. ")])]):t._e(),t.isRecording||t.hasRecording?t._e():e("b-button",{attrs:{variant:"danger"},on:{click:t.record}},[t._v(" "+t._s(t.$t("record-button"))+" ")]),"audioRecordNoStop"!=t.mode?e("div",{staticClass:"mb-3"},[t.isRecording?e("b-button",{on:{click:t.finish}},[t._v(t._s(t.$t("stop-button")))]):t._e()],1):t._e(),t.isRecording?e("div",[e("small",[t._v(t._s(t.timeRemaining)+" "+t._s(t.$t("x-seconds-left")))])]):t._e(),t.hasRecording&&!t.isPlaying?e("b-button",{ref:"play",attrs:{variant:"success"},on:{click:t.play}},[e("span",[t._v(" "+t._s(t.$t("play-button"))+" ")])]):t._e(),t.hasRecording&&t.isPlaying?e("b-button",{ref:"play",attrs:{variant:"secondary"},on:{click:t.pause}},[e("span",[t._v(" "+t._s(t.$t("pause-button"))+" ")])]):t._e(),t.hasRecording?e("div",{staticClass:"mt-2"},[e("a",{attrs:{href:""},on:{click:t.reset}},[t._v(t._s(t.$t("redo-recording")))])]):t._e()],1):t._e()],1)},ut=[];s(4603),s(7566),s(8721);const pt=s(8651);var dt={name:"audioRecord",props:{init:{type:[String,Blob,Array]},mode:{type:String,default:"audioRecord"},constraints:{type:Object},fieldData:{type:Object}},data(){return{recording:{},isRecording:!1,hasRecording:!1,audioCtx:{},audioConstraints:{audio:!0,video:!1},mediaRecorder:{},supported:null,interval:{},timeRemaining:null,isPlaying:!1}},computed:{recordingTime(){return this.constraints["http://schema.org/maxValue"][0]["@value"]},generateNumber(){return 1e5+Math.floor(9e5*Math.random())},getAudioSource(){return this.fieldData["http://schema.org/audio"]?this.fieldData["http://schema.org/audio"][0]["http://schema.org/contentUrl"][0]["@id"]:""}},methods:{record(){this.isRecording=!0,this.mediaRecorder.start(this.recordingTime),this.interval=setInterval(this.countdown,1e3)},countdown(){this.timeRemaining<=0?clearInterval(this.interval):this.timeRemaining-=1},play(){this.recording.play(),this.isPlaying=!0},pause(){this.recording.pause(),this.endPlay()},endPlay(){this.isPlaying=!1},finish(){this.mediaRecorder.stop(),this.hasRecording=!0,this.isRecording=!1,clearInterval(this.interval)},reset(t){t.preventDefault(),this.hasRecording=!1,this.isRecording=!1,navigator.mediaDevices.getUserMedia(this.audioConstraints).then(this.initialize,this.error)},initialize(t){this.mediaRecorder=new pt(t),this.mediaRecorder.mimeType="audio/wav",this.timeRemaining=this.recordingTime/1e3,window.mediaRecorder=this.mediaRecorder;const e=this;this.mediaRecorder.ondataavailable=t=>{const s=URL.createObjectURL(t);e.recording.src=s,e.recording.blob=t,this.$emit("valueChanged",this.recording.blob),e.finish()}},error(){}},watch:{init(){"skip"!==this.init&&"dontKnow"!==this.init||(this.hasRecording=!1)}},mounted(){this.recording=new Audio,this.recording.onended=this.endPlay;const t=window.AudioContext||window.webkitAudioContext;if(this.audioCtx=new t,navigator.mediaDevices.getUserMedia){if(this.supported=!0,navigator.mediaDevices.getUserMedia(this.audioConstraints).then(this.initialize,this.error),this.init)if(d().isString(this.init))this.init.startsWith("blob")?(this.recording.src=this.init,this.hasRecording=!0):this.hasRecording=!1;else if(this.init instanceof Blob){const t=URL.createObjectURL(this.init);this.recording.src=t,this.recording.blob=this.init,this.hasRecording=!0}else this.hasRecording=!1}else this.supported=!1}},mt=dt,gt=(0,$.A)(mt,ht,ut,!1,null,null,null),vt=gt.exports,bt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"textInput"},[e("b-form",{ref:"form",on:{submit:t.onSubmit}},[e("b-row",[e("b-col",{staticClass:"col-4 col-md-4",attrs:{lg:"4"}},[e("b-form-group",[e("b-form-input",{attrs:{type:"text"},model:{value:t.input1,callback:function(e){t.input1=e},expression:"input1"}})],1)],1),t.hasUnit&&Array.isArray(t.options)?e("b-col",{attrs:{lg:"4"}},[e("multiselect",{attrs:{options:this.options,searchable:!1,"show-labels":!1,allowEmpty:!1,placeholder:"unit"},model:{value:t.input2,callback:function(e){t.input2=e},expression:"input2"}})],1):t.hasUnit&&!Array.isArray(t.options)?e("div",[e("p",{staticClass:"singleUnit"},[t._v(" "+t._s(t.options))])]):t._e()],1),e("b-btn",{attrs:{type:"submit"}},[t._v(t._s(t.$t("submit-button")))])],1)],1)},yt=[],ft=s(5262),wt=s.n(ft),_t={name:"TextInput",props:["constraints","init","inputType","selected_language"],components:{Multiselect:wt()},data(){return{input1:"",input2:""}},methods:{onSubmit(t){if(t.preventDefault(),this.$refs.form.className="was-validated",this.hasUnit){const t={value:this.input1,unitCode:this.input2};this.$emit("valueChanged",t)}this.$emit("valueChanged",this.input1)}},computed:{hasUnit(){return!!this.constraints["http://schema.org/unitCode"]},options(){return this.constraints["http://schema.org/unitCode"].length>1?d().map(this.constraints["http://schema.org/unitCode"],(t=>t["@value"])):1===this.constraints["http://schema.org/unitCode"].length?this.constraints["http://schema.org/unitCode"][0]["@value"]:""}},mounted(){this.init&&(this.hasUnit?(this.input1=this.init.value,this.input2=this.init.unitCode):this.input1=this.init)}},xt=_t,kt=(0,$.A)(xt,bt,yt,!1,null,null,null),$t=kt.exports,St=function(){var t=this,e=t._self._c;return e("div",{staticClass:"textArea"},[e("b-form",{ref:"form",on:{submit:t.onSubmit}},[e("b-row",{staticClass:"mt-2"},[e("b-col",[e("b-form-textarea",{attrs:{id:"textarea-default",rows:"10"},model:{value:t.input1,callback:function(e){t.input1=e},expression:"input1"}})],1)],1),e("br"),e("b-btn",{attrs:{type:"submit"}},[t._v(t._s(t.$t("submit-button")))])],1)],1)},Ct=[],At={name:"TextArea",props:["constraints","init","inputType","selected_language"],components:{},data(){return{input1:""}},methods:{onSubmit(t){t.preventDefault(),this.$refs.form.className="was-validated",this.$emit("valueChanged",this.input1)}},computed:{},mounted(){this.init&&(this.input1=this.init)}},It=At,Pt=(0,$.A)(It,St,Ct,!1,null,null,null),jt=Pt.exports,Dt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"IntegerInput"},[e("b-form",{ref:"form",attrs:{novalidate:!0},on:{submit:t.onSubmit}},[e("b-row",[e("b-col",{staticClass:"col-4 col-md-4",attrs:{lg:"4"}},[e("b-form-group",[e("b-form-input",{ref:"integerInput",class:{"is-invalid":!t.isValidInt,"is-valid":t.isValidInt},attrs:{placeholder:"value"},model:{value:t.input1,callback:function(e){t.input1=e},expression:"input1"}}),e("div",{staticClass:"invalid-feedback"},[t._v(" "+t._s(t.$t("invalid-feedback-number"))+" ")])],1)],1),t.hasUnit&&Array.isArray(t.options)?e("b-col",{attrs:{lg:"4"}},[e("multiselect",{attrs:{options:this.options,searchable:!1,"show-labels":!1,allowEmpty:!1,placeholder:"unit"},model:{value:t.input2,callback:function(e){t.input2=e},expression:"input2"}})],1):t.hasUnit&&!Array.isArray(t.options)?e("div",[e("p",{staticClass:"singleUnit"},[t._v(" "+t._s(t.options))])]):t._e()],1),e("b-btn",{attrs:{type:"submit"}},[t._v(t._s(t.$t("submit-button")))])],1)],1)},Ot=[],Rt={name:"IntegerInput",props:["constraints","init"],components:{Multiselect:wt()},data(){return{input1:"",input2:""}},methods:{onSubmit(t){if(t.preventDefault(),this.$refs.form.className="was-validated",this.isValidInt){if(this.hasUnit){const t={value:this.input1,unitCode:this.input2};this.$emit("valueChanged",t)}this.$emit("valueChanged",this.input1)}},isValid(){const t=parseFloat(this.input1);return!isNaN(t)&&Number.isInteger(t)}},computed:{isValidInt(){return this.isValid(this.input1)},hasUnit(){return!!this.constraints["http://schema.org/unitCode"]},options(){return this.constraints["http://schema.org/unitCode"].length>1?d().map(this.constraints["http://schema.org/unitCode"],(t=>t["@value"])):1===this.constraints["http://schema.org/unitCode"].length?this.constraints["http://schema.org/unitCode"][0]["@value"]:""}},mounted(){this.init&&(this.hasUnit?(this.input1=this.init.value,this.input2=this.init.unitCode):this.input1=this.init)}},Tt=Rt,Ut=(0,$.A)(Tt,Dt,Ot,!1,null,null,null),Mt=Ut.exports,Lt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"FloatInput"},[e("b-form",{ref:"form",attrs:{novalidate:!0},on:{submit:t.onSubmit}},[e("b-row",[e("b-col",{staticClass:"col-4 col-md-4",attrs:{lg:"4"}},[e("b-form-group",[e("b-form-input",{ref:"floatInput",class:{"is-valid":t.isValidFloat},model:{value:t.input1,callback:function(e){t.input1=e},expression:"input1"}})],1)],1),t.hasUnit&&Array.isArray(t.options)?e("b-col",{attrs:{lg:"4"}},[e("multiselect",{attrs:{options:this.options,searchable:!1,"show-labels":!1,allowEmpty:!1,placeholder:"unit"},model:{value:t.input2,callback:function(e){t.input2=e},expression:"input2"}})],1):t.hasUnit&&!Array.isArray(t.options)?e("div",[e("p",{staticClass:"singleUnit"},[t._v(" "+t._s(t.options))])]):t._e()],1),e("b-btn",{attrs:{type:"submit"}},[t._v(t._s(t.$t("submit-button")))])],1)],1)},Nt=[],Et={name:"FloatInput",props:["constraints","init"],components:{Multiselect:wt()},data(){return{input1:"",input2:""}},methods:{onSubmit(t){if(t.preventDefault(),this.$refs.form.className="was-validated",this.isValidFloat)if(this.hasUnit){const t={value:this.input1,unitCode:this.input2};this.$emit("valueChanged",t)}else this.$emit("valueChanged",this.input1)},isValid(){const t=parseFloat(this.input1);return!isNaN(t)&&Number.isFinite(t)},selectedLanguageLabel(t){const e=d().filter(t["http://www.w3.org/2004/02/skos/core#prefLabel"],(t=>t["@language"]===this.selected_language));return Array.isArray(e)&&e.length?e[0]["@value"]:t["http://www.w3.org/2004/02/skos/core#prefLabel"][0]["@value"]}},computed:{isValidFloat(){return this.isValid(this.input1)},hasUnit(){return!(!this.constraints["http://schema.org/unitCode"]&&!this.constraints["http://schema.repronim.org/unitOptions"])},options(){if(this.constraints["http://schema.org/unitCode"]){if(this.constraints["http://schema.org/unitCode"].length>1)return d().map(this.constraints["http://schema.org/unitCode"],(t=>t["@value"]));if(1===this.constraints["http://schema.org/unitCode"].length)return this.constraints["http://schema.org/unitCode"][0]["@value"]}else if(this.constraints["http://schema.repronim.org/unitOptions"]){if(this.constraints["http://schema.repronim.org/unitOptions"].length>1)return d().map(this.constraints["http://schema.repronim.org/unitOptions"],(t=>this.selectedLanguageLabel(t)));if(1===this.constraints["http://schema.repronim.org/unitOptions"].length)return this.selectedLanguageLabel(this.constraints["http://schema.repronim.org/unitOptions"][0])}return""}},mounted(){this.init&&(this.hasUnit?(this.input1=this.init.value,this.input2=this.init.unitCode):this.input1=this.init)}},Vt=Et,qt=(0,$.A)(Vt,Lt,Nt,!1,null,null,null),Ft=qt.exports,zt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"RangeInput"},[e("b-form",{ref:"form",attrs:{novalidate:!0},on:{submit:t.onSubmit}},[e("b-row",[e("b-col",{staticClass:"col-4 col-md-4",attrs:{lg:"4"}},[e("b-form-group",[e("b-form-input",{ref:"rangeInput",class:{"is-valid":t.isValidFloat},attrs:{placeholder:"start"},model:{value:t.input1,callback:function(e){t.input1=e},expression:"input1"}})],1)],1),e("b-col",{staticClass:"col-4 col-md-4",attrs:{lg:"4"}},[e("b-form-group",[e("b-form-input",{ref:"rangeInput",class:{"is-valid":t.isValidFloat},attrs:{placeholder:"end"},model:{value:t.input2,callback:function(e){t.input2=e},expression:"input2"}})],1)],1),t.hasUnit&&Array.isArray(t.options)?e("b-col",{attrs:{lg:"4"}},[e("multiselect",{attrs:{options:this.options,searchable:!1,"show-labels":!1,allowEmpty:!1,placeholder:"unit"},model:{value:t.input3,callback:function(e){t.input3=e},expression:"input3"}})],1):t.hasUnit&&!Array.isArray(t.options)?e("div",[e("p",{staticClass:"singleUnit"},[t._v(" "+t._s(t.options))])]):t._e()],1),e("b-btn",{attrs:{type:"submit"}},[t._v(t._s(t.$t("submit-button")))])],1)],1)},Kt=[],Bt={name:"RangeInput",props:["constraints","init"],components:{Multiselect:wt()},data(){return{input1:"",input2:"",input3:""}},methods:{onSubmit(t){if(t.preventDefault(),this.$refs.form.className="was-validated",this.areValidFloats&&this.isValidRange)if(this.hasUnit){const t={value1:this.input1,value2:this.input2,unitCode:this.input3};this.$emit("valueChanged",t)}else{const t={value1:this.input1,value2:this.input2};this.$emit("valueChanged",t)}},isValid(){const t=parseFloat(this.input);return!isNaN(t)&&Number.isFinite(t)},isValidRange(){const t=parseFloat(this.input1),e=parseFloat(this.input2);return e>t},selectedLanguageLabel(t){const e=d().filter(t["http://www.w3.org/2004/02/skos/core#prefLabel"],(t=>t["@language"]===this.selected_language));return Array.isArray(e)&&e.length?e[0]["@value"]:t["http://www.w3.org/2004/02/skos/core#prefLabel"][0]["@value"]}},computed:{areValidFloats(){return!(!this.isValid(this.input1)||!this.isValid(this.input2))},hasUnit(){return!(!this.constraints["http://schema.org/unitCode"]&&!this.constraints["http://schema.repronim.org/unitOptions"])},options(){if(this.constraints["http://schema.org/unitCode"]){if(this.constraints["http://schema.org/unitCode"].length>1)return d().map(this.constraints["http://schema.org/unitCode"],(t=>t["@value"]));if(1===this.constraints["http://schema.org/unitCode"].length)return this.constraints["http://schema.org/unitCode"][0]["@value"]}else if(this.constraints["http://schema.repronim.org/unitOptions"]){if(this.constraints["http://schema.repronim.org/unitOptions"].length>1)return d().map(this.constraints["http://schema.repronim.org/unitOptions"],(t=>this.selectedLanguageLabel(t)));if(1===this.constraints["http://schema.repronim.org/unitOptions"].length)return this.selectedLanguageLabel(this.constraints["http://schema.repronim.org/unitOptions"][0])}return""}},mounted(){this.init&&(this.hasUnit?(this.input1=this.init.value1,this.input2=this.init.value2,this.input3=this.init.unitCode):(this.input1=this.init.value1,this.input2=this.init.value2))}},Ht=Bt,Qt=(0,$.A)(Ht,zt,Kt,!1,null,null,null),Yt=Qt.exports,Jt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"DateInput"},[e("datepicker",{attrs:{placeholder:"Select Date",lang:"selected_language",disabledDates:t.dateParam.disabledDates,format:t.customFormatter,minimumView:t.inputType,maximumView:"year",initialView:t.inputType},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}})],1)},Zt=[],Gt=s(6045),Wt={name:"DateInput",props:["constraints","init","inputType","selected_language"],components:{Datepicker:Gt.A},watch:{input(){this.$emit("valueChanged",this.input)}},methods:{sendData(t){this.$emit("valueChanged",t.getFullYear())},customFormatter(t){return"year"===this.inputType?u()(t).format("YYYY"):"date"===this.inputType?u()(t).format("MMM DD YYYY"):t}},data(){return{input:null,dateParam:{disabledDates:{from:new Date}}}},mounted(){this.init&&("year"===this.inputType?this.input=new Date(this.init,0,365):this.input=this.init)}},Xt=Wt,te=(0,$.A)(Xt,Jt,Zt,!1,null,null,null),ee=te.exports,se=function(){var t=this,e=t._self._c;return e("div",{staticClass:"DocumentUpload"},[e("input",{attrs:{type:"file"},on:{change:t.onFileSelected}}),e("button",{on:{click:t.onSubmit}},[t._v(t._s(t.$t("upload-button")))])])},ie=[],ae={name:"DocumentUpload",props:["constraints","init"],watch:{input(){this.$emit("valueChanged",this.input)}},methods:{onFileSelected(t){this.selectedFile=t.target.files[0]},onSubmit(t){t.preventDefault(),this.$emit("valueChanged",this.selectedFile)}},computed:{c(){return this.a+this.b}},data(){return{selectedFile:null}},mounted(){this.init&&(this.selectedFile=this.init)}},re=ae,ne=(0,$.A)(re,se,ie,!1,null,null,null),oe=ne.exports,le=function(){var t=this,e=t._self._c;return e("div",{staticClass:"textInput"},[e("b-form",{on:{submit:t.onSubmit}},[e("b-row",[e("b-col",{attrs:{lg:"4"}},[e("b-input-group",[e("b-form-input",{attrs:{placeholder:"first name",required:""},model:{value:t.input1,callback:function(e){t.input1=e},expression:"input1"}})],1)],1),e("b-col",{attrs:{lg:"4"}},[e("b-input-group",[e("b-form-input",{attrs:{placeholder:"middle name"},model:{value:t.input2,callback:function(e){t.input2=e},expression:"input2"}})],1)],1),e("b-col",{attrs:{lg:"4"}},[e("b-input-group",[e("b-form-input",{attrs:{placeholder:"family name",required:""},model:{value:t.input3,callback:function(e){t.input3=e},expression:"input3"}})],1)],1)],1),e("br"),e("b-btn",{attrs:{type:"submit"}},[t._v(t._s(t.$t("submit-button")))])],1)],1)},ce=[],he={name:"TextInput",props:["constraints","init"],methods:{onSubmit(t){t.preventDefault();const e={first_name:this.input1,middle_name:this.input2,last_name:this.input3};this.$emit("valueChanged",e)}},data(){return{input1:"",input2:"",input3:""}},mounted(){this.init&&(this.input1=this.init.first_name,this.input2=this.init.middle_name,this.input3=this.init.last_name)}},ue=he,pe=(0,$.A)(ue,le,ce,!1,null,null,null),de=pe.exports,me=function(){var t=this,e=t._self._c;return e("div",{staticClass:"SliderInput ml-3 mr-3 pl-3 pr-3"},[e("vue-slider",{attrs:{lazy:!0,data:t.interval,marks:!0,process:!1},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}}),e("b-row",{staticClass:"mt-3 pt-3 pl-0 pr-0"},[e("div",{staticClass:"col text-left pr-0 pl-0"},[t.getMinImageLabel?e("span",[e("img",{staticClass:"imgLabel",attrs:{src:t.getMinImageLabel}})]):t._e(),e("p",[t._v(t._s(t.getMinLabel))])]),e("div",{staticClass:"col text-right pr-0 pl-0"},[t.getMaxImageLabel?e("span",[e("img",{staticClass:"imgLabel",attrs:{src:t.getMaxImageLabel}})]):t._e(),e("p",[t._v(t._s(t.getMaxLabel))])])]),e("b-form",{on:{submit:t.sendData}},[e("b-button",{attrs:{type:"submit"}},[t._v(t._s(t.$t("submit-button")))])],1)],1)},ge=[],ve=s(378),be=s.n(ve),ye={name:"SliderInput",props:["constraints","init","selected_language"],components:{VueSlider:be()},methods:{sendData(t){t.preventDefault(),this.$emit("valueChanged",this.input)}},computed:{interval(){return d().map(this.constraints["http://schema.repronim.org/choices"],(t=>t["http://schema.repronim.org/value"][0]["@value"]))},getMinLabel(){if(this.constraints["http://schema.repronim.org/choices"]){const t=d().filter(this.constraints["http://schema.repronim.org/choices"][0]["http://schema.org/name"],(t=>t["@language"]===this.selected_language));return t[0]["@value"]}return"no min label"},getMaxLabel(){if(this.constraints["http://schema.repronim.org/choices"]){const t=this.constraints["http://schema.repronim.org/choices"].length,e=d().filter(this.constraints["http://schema.repronim.org/choices"][t-1]["http://schema.org/name"],(t=>t["@language"]===this.selected_language));return e[0]["@value"]}return"no max label"},getMinImageLabel(){const t=this.constraints["http://schema.repronim.org/choices"];return!!t[0]["http://schema.org/image"]&&t[0]["http://schema.org/image"][0]["@value"]},getMaxImageLabel(){const t=this.constraints["http://schema.repronim.org/choices"],e=t.length;return!!t[e-1]["http://schema.org/image"]&&t[e-1]["http://schema.org/image"][0]["@value"]}},data(){return{input:null}},mounted(){this.init?this.input=this.init:this.input=Math.round(this.interval[this.interval.length-1]/2)}},fe=ye,we=(0,$.A)(fe,me,ge,!1,null,null,null),_e=we.exports,xe=function(){var t=this,e=t._self._c;return e("div",{staticClass:"TimeRangeInput container ml-3 pl-3"},[e("b-row",{staticClass:"mt-2 mb-2"},[e("b-col",{staticClass:"mt-2 mb-2"},[t._v(" went to bed: "+t._s(t.yesterday)+" "),e("vue-timepicker",{attrs:{format:"hh:mm A"},model:{value:t.slept,callback:function(e){t.slept=e},expression:"slept"}})],1),e("b-col",{staticClass:"mt-2 mb-2"},[t._v(" woke up: "+t._s(t.today)+" "),e("vue-timepicker",{attrs:{format:"hh:mm A"},model:{value:t.woke,callback:function(e){t.woke=e},expression:"woke"}})],1)],1),null!=t.timeSlept?e("div",{staticClass:"mt-2 mb-2"},[t.timeSlept<0?e("div",{staticClass:"mt-2 mb-2"},[e("b-alert",{attrs:{show:"",variant:"danger"}},[t._v("You can't sleep negative hours!")])],1):e("b-button",{on:{click:t.sendData}},[t._v("Submit "+t._s(t.timeSlept)+" hours")])],1):t._e()],1)},ke=[],$e=s(286),Se=s.n($e);window.moment=u();var Ce={name:"timeRangeInput",props:["constraints","init","selected_language","id"],data(){return{slept:{hh:"08",mm:"00",A:"PM"},woke:{A:"AM",hh:"06",mm:"00"},today:null,yesterday:null}},components:{VueTimepicker:Se()},computed:{timeSlept(){const t=this.sleptAt,e=this.wokeAt,s=e.diff(t,"hours");return isNaN(s)?null:parseInt(s,0)},sleptAt(){const t=u()(`${this.slept.hh}:${this.slept.mm} ${this.slept.A}`,"hh:mm A"),e=u()(new Date),s=u()(new Date).add(-1,"days");return"AM"===this.slept.A?(t.set("date",e.get("date")),t.set("month",e.get("month")),t.set("year",e.get("year"))):(t.set("date",s.get("date")),t.set("month",s.get("month")),t.set("year",s.get("year"))),t},wokeAt(){const t=u()(new Date),e=u()(`${this.woke.hh}:${this.woke.mm} ${this.woke.A}`,"hh:mm A");return e.set("date",t.get("date")),e.set("month",t.get("month")),e.set("year",t.get("year")),e}},methods:{sendData(){this.$emit("valueChanged",{startTime:this.sleptAt.toISOString(),endTime:this.wokeAt.toISOString(),difference:this.timeSlept})}},watch:{init:{handler(){this.init},deep:!0}},mounted(){if(void 0!==this.init||null!=this.init){const t=u()(this.init.startTime).format("hh:mm A"),e=u()(this.init.endTime).format("hh:mm A");this.slept.A=t.split(" ")[1],this.slept.hh=t.split(":")[0],this.slept.mm=t.split(":")[1].split(" ")[0],this.woke.A=e.split(" ")[1],this.woke.hh=e.split(":")[0],this.woke.mm=e.split(":")[1].split(" ")[0]}}},Ae=Ce,Ie=(0,$.A)(Ae,xe,ke,!1,null,null,null),Pe=Ie.exports,je=function(){var t=this,e=t._self._c;return e("div",{staticClass:"SelectInput"},["select"===t.inputType&&this.constraints["http://schema.org/itemListElement"]?e("multiselect",{attrs:{options:this.options,searchable:!1,"show-labels":!1,placeholder:"Pick a value"},on:{input:t.checkNotOtherAndSendData},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}}):e("multiselect",{attrs:{id:"ajax",placeholder:"Type to search",options:this.options,multiple:t.multipleAllowed,searchable:!0,"internal-search":!0,"clear-on-select":!1,"close-on-select":!0,"options-limit":300,limit:5,"limit-text":t.limitText,"max-height":600,"show-no-results":!1,"hide-selected":!0},on:{input:t.checkNotOtherAndSendData},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},[e("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v(t._s(t.$t("select-invalid-query")))])]),t.checkOther?e("div",{staticStyle:{display:"block"},attrs:{id:"ifOther"}},[e("br"),e("b-form-input",{attrs:{placeholder:"Please describe"},on:{change:t.sendData},model:{value:t.otherInput,callback:function(e){t.otherInput=e},expression:"otherInput"}})],1):t._e()],1)},De=[],Oe={name:"SelectInput",props:["reprotermsUrl","constraints","init","selected_language","inputType"],components:{Multiselect:wt()},data(){return{selected:null,otherInput:"",options:[],selectedCountries:[],isLoading:!1}},watch:{input(){this.$emit("valueChanged",this.selected)}},methods:{checkNotOtherAndSendData(t){"Other"!==t&&this.$emit("valueChanged",t)},sendData(t){this.$emit("valueChanged",[this.selected,t])},limitText(t){return`and ${t} other countries`}},mounted(){this.init&&(Array.isArray(this.init)?(this.selected=this.init[0],this.otherInput=this.init[1]):this.selected=this.init),this.constraints["http://schema.repronim.org/choices"].length>1?this.options=d().map(this.constraints["http://schema.repronim.org/choices"],(t=>{const e=d().filter(t["http://schema.org/name"],(t=>t["@language"]===this.selected_language));return e[0]["@value"]})):1===this.constraints["http://schema.repronim.org/choices"].length&&o.A.get(this.constraints["http://schema.repronim.org/choices"][0]["@value"]).then((t=>{"selectCountry"===this.inputType?this.options=d().map(t.data,(t=>t.country)):"selectState"===this.inputType||"selectLanguage"===this.inputType?this.options=Object.values(t.data):this.options=t.data}))},computed:{multipleAllowed(){return!!this.constraints["http://schema.repronim.org/multipleChoice"]},checkOther(){return"Other"===this.selected}}},Re=Oe,Te=(0,$.A)(Re,je,De,!1,null,null,null),Ue=Te.exports,Me=function(){var t=this,e=t._self._c;return e("div",{staticClass:"staticReadOnly"},[e("div",[e("b-btn",{on:{click:t.onSubmit}},[t._v(" Done reading ")])],1)])},Le=[],Ne={name:"StaticReadOnly",props:["constraints","init","result","selected_language"],methods:{onSubmit(t){t.preventDefault(),this.$emit("valueChanged",this.input)}},data(){return{contact:j().contact,input:""}},computed:{getPId(){return this.$store.getters.getParticipantId}},mounted(){this.getPId&&(this.input=this.getPId),this.init&&(this.input=this.init)}},Ee=Ne,Ve=(0,$.A)(Ee,Me,Le,!1,null,null,null),qe=Ve.exports,Fe=function(){var t=this,e=t._self._c;return e("div",{staticClass:"SaveData ml-3 mr-3 pl-3 pr-3"},[t.isUploading||t.hasData||t.hasTimedOut?t._e():e("div",[t.shouldUpload?e("div",[e("p",[t._v(t._s(t.$t("save-data")))]),t.downloadAndSubmit?e("b-button",{ref:"upload",attrs:{variant:"danger"},on:{click:t.upload}},[t._v(" "+t._s(t.$t("download-and-submit-button"))+" ")]):e("b-button",{ref:"upload",attrs:{variant:"danger"},on:{click:t.upload}},[t._v(" "+t._s(t.$t("upload-button"))+" ")])],1):e("div",[t.exportOption?e("p",[t._v(t._s(t.$t("export-and-finish")))]):e("p",[t._v(t._s(t.$t("finish")))]),e("b-button",{attrs:{variant:"danger"},on:{click:t.finish}},[t._v(" "+t._s(t.$t("finish-button"))+" ")])],1)]),t.isUploading&&t.percentCompleted>0&&t.showProgressBar?e("div",{staticClass:"loader"},[e("p",[t._v(t._s(t.$t("upload-message")))]),e("b-progress",{attrs:{max:100,striped:t.hasStripe}},[e("b-progress-bar",{attrs:{value:100*t.percentCompleted,label:100*t.percentCompleted+"%",animated:""}})],1)],1):t.isUploading&&0===t.percentCompleted?e("div",[e("p",[t._v(t._s(t.$t("prepare-upload")))]),e("Loader")],1):t._e(),e("b-modal",{ref:"timeout-modal",attrs:{"ok-title":"Done","ok-only":"",title:"Uh-oh! Upload unsuccessful!","no-close-on-esc":"","no-close-on-backdrop":"","hide-header-close":""},on:{ok:t.timeoutOK},model:{value:t.timeout,callback:function(e){t.timeout=e},expression:"timeout"}},[t.dataUploadPath?e("p",[t._v("Please submit your locally exported zip file "),e("a",{attrs:{href:t.dataUploadPath,target:"_blank"}},[t._v("here")])]):e("p",[t._v("Let researchers know with the "),e("b",[t._v("Help")]),t._v(" button or by email to "+t._s(t.contact))])]),e("div",{class:{done:t.hasData},staticStyle:{width:"800px",margin:"0 auto"}})],1)},ze=[],Ke=function(){var t=this;t._self._c;return t._m(0)},Be=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"layer-preloader"},[e("div",{staticClass:"loading"},[e("div",{staticClass:"loader firstColor"},[e("div",{staticClass:"loader secondColor"},[e("div",{staticClass:"loader thirdColor"})])])])])}],He={},Qe=He,Ye=(0,$.A)(Qe,Ke,Be,!1,null,null,null),Je=Ye.exports;let Ze,Ge=[],We=0;var Xe={name:"SaveData",props:["constraints","init","selected_language","ipAddress"],components:{Loader:Je},data(){return{recording:{},isUploading:!1,hasData:!1,percentCompleted:0,timeout:!1,uploadFailed:!1,showProgressBar:!0,invalidToken:!1,downloadAndSubmit:j().downloadAndSubmit,dataUploadPath:j().dataUploadPath,contact:j().contact}},computed:{shouldUpload(){return!(!j().backendServer||!this.$store.getters.getAuthToken)},participantId(){return this.$store.getters.getParticipantId},exportOption(){return this.$store.getters.getHasExport},hasStripe(){return!(100===this.percentCompleted)},hasTimedOut(){return this.timeout}},methods:{finish(){this.hasData=!0,this.$emit("valueChanged","completed")},timeoutOK(){this.$emit("valueChanged","timeout")},upload(){this.isUploading=!0,this.uploadZipData()},uploadZipData(){const t=this.$store.state.exportResponses,e=this.$store.state.scores,s=this.$store.state.participantId,i={response:t,scores:e,participantId:s};this.formatData(i)},formatData(t){const e=this.$store.getters.getAuthToken,s=this.$store.state.expiryMinutes,i=new(g());let a=0;const r=`${(0,v.A)()}-${this.participantId}`;d().map(t.response,(t=>{const e=[];d().map(t,(t=>{const s={...t};if("reproschema:Response"===t["@type"]&&t.value instanceof Blob){const e=t.isAbout.split("/"),a=t["@id"].split("uuid:")[1];i.folder(r).file(`${e[e.length-1]}-${a}.wav`,t.value),s.value=`${e[e.length-1]}-${a}.wav`}e.push(s)})),e.length&&(i.folder(r).file(`activity_${a}.jsonld`,JSON.stringify(e,null,4)),a+=1)})),i.generateAsync({type:"blob"}).then((t=>{this.downloadAndSubmit&&(0,f.saveAs)(t,`${r}.zip`);const i=1e7,a=t.size;let n,o=0,l=o+i,c=1;while(o<a)n=l>a?t.slice(o,a+1,"Blob"):t.slice(o,l,"Blob"),Ge.push(n),c+=1,o=l,l=o+i;Ze=Ge.length;let h=[];for(let u=0;u<Ge.length;u++){const t=new FormData;if(t.append("file",Ge[u],`${r}.zip.00${u}`),t.append("auth_token",`${e}`),t.append("expires",`${s}`),h.push(this.sendRetry(`${j().backendServer}/submit`,t,u)),this.timeout)break}Promise.all(h).then((t=>{this.isUploading=!1,this.hasData=!0,this.$emit("valueChanged",{status:t})}))}))},sendRetry(t,e,s,i=3,a=1e4){const r={"Content-Type":"multipart/form-data"};return o.A.post(`${j().backendServer}/submit`,e,r).then((t=>{Ge.splice(s,1),We++;const e=We/Ze;return this.percentCompleted=e.toFixed(2),t.status})).catch((r=>{if(!(i>0))return this.timeout=!0,this.showProgressBar=!1,r.response.status;setTimeout((()=>this.sendRetry(t,e,s,i-1,2*a)),a)}))}}},ts=Xe,es=(0,$.A)(ts,Fe,ze,!1,null,null,null),ss=es.exports,is=function(){var t=this,e=t._self._c;return e("div",{staticClass:"docked-layout"},[e("section",[e("div",{ref:"consentDoc",staticClass:"consent-doc"},[t._m(0),e("section"),t._v(" "),t._m(1),t._m(2),t._m(3),e("section",[e("div",{staticClass:"research container"},[e("object",{attrs:{data:"/static/images/Step3.svg",type:"image/svg+xml"}}),e("div",[t._v("My data will be used for research as described in the study information ("),e("router-link",{attrs:{to:"/study/consent-review"}},[t._v("https://"),e("wbr"),t._v("parkinsonmpower."),e("wbr"),t._v("org/"),e("wbr"),t._v("consent")]),t._v(").")],1)])]),t._m(4),t._m(5),t._m(6),t._m(7),t._m(8),t._m(9)]),e("footer",[e("form",{staticClass:"slider",attrs:{onsubmit:"return false"}},[e("div",{staticClass:"slider-element animated",class:{slideOutLeft:t.showSharing}},[e("div",{staticClass:"inner"},[e("h1",[t._v("Please review and sign below if you want to join.")]),e("p",[t._v("I have read and understand the above information. All of my questions have been answered. I freely and willingly choose to take part in the mPower Progression Study. By signing this consent I have not given up any of my legal rights.")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],attrs:{placeholder:"Please type your full name here"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}}),e("div",{staticClass:"buttons"},[e("b-button",{attrs:{variant:"primary"},on:{click:t.reject}},[t._v(" Disagree ")]),e("b-button",{attrs:{variant:"success",disabled:t.canSubmit},on:{click:t.accept}},[t._v(" Accept ")])],1)])])])])])])},as=[function(){var t=this,e=t._self._c;return e("section",{staticClass:"preamble-section"},[e("div",{staticClass:"preamble container"},[e("div",[e("h2",[t._v("mPower Progression Study")]),e("h3",[t._v("Consent and Authorization Contents")])])])])},function(){var t=this,e=t._self._c;return e("section",[e("div",{staticClass:"assertion container"},[e("div",[t._v("I understand:")])])])},function(){var t=this,e=t._self._c;return e("section",[e("div",{staticClass:"will-use container"},[e("object",{attrs:{data:"/static/images/Step1.svg",type:"image/svg+xml"}}),e("div",[t._v("I will use the mPower app to answer questions and do short physical and cognitive activities. The app will help me track my symptoms, triggers, and medications.")])])])},function(){var t=this,e=t._self._c;return e("section",[e("div",{staticClass:"privacy container"},[e("object",{attrs:{data:"/static/images/Step2.svg",type:"image/svg+xml"}}),e("div",[t._v("My study data will be encrypted and transferred from my phone. It will be stored on Sage Bionetworks secure cloud-based database.")])])])},function(){var t=this,e=t._self._c;return e("section",[e("div",{staticClass:"sharing-scope container"},[e("object",{attrs:{data:"/static/images/Step4.svg",type:"image/svg+xml"}}),e("div",[t._v("I have the option to share my coded study data for future research. It is up to me. I can say yes or no.")])])])},function(){var t=this,e=t._self._c;return e("section",[e("div",{staticClass:"risks-benefits container"},[e("object",{attrs:{data:"/static/images/Step5.svg",type:"image/svg+xml"}}),e("div",[t._v("The main risk of participating in the mPower Progression Study is to my privacy and confidentiality. This risk is low but not zero. The main benefit is seeing the trends in my data over time.")])])])},function(){var t=this,e=t._self._c;return e("section",[e("div",{staticClass:"unpaid container"},[e("object",{attrs:{data:"/static/images/Step6.svg",type:"image/svg+xml"}}),e("div",[t._v("mPower Progression Study is a research study. The mPower app shouldnt be used for diagnosis or treatment decision.")])])])},function(){var t=this,e=t._self._c;return e("section",[e("div",{staticClass:"not-medical container"},[e("object",{attrs:{data:"/static/images/Step7.svg",type:"image/svg+xml"}}),e("div",[t._v("I will not get paid for participating in this study. I will not receive any profit from the use of my data in this or future research.")])])])},function(){var t=this,e=t._self._c;return e("section",[e("div",{staticClass:"voluntary container"},[e("object",{attrs:{data:"/static/images/Step8.svg",type:"image/svg+xml"}}),e("div",[t._v("I can withdraw (quit) at any time for any reason. There is no penalty if I withdraw .")])])])},function(){var t=this,e=t._self._c;return e("section",[e("div",{staticClass:"contact container"},[e("object",{attrs:{data:"/static/images/Step9.svg",type:"image/svg+xml"}}),e("div",[t._v("My contact information may be used to tell me about other studies.")])])])}],rs={name:"StudySign",data(){return{name:"",showSharing:!1,scope:""}},mounted(){this.init&&(this.name=this.init)},computed:{canSubmit(){return this.showSharing?""===this.scope:0===this.name.length}},methods:{reject(){this.$emit("valueChanged","disagree")},accept(){console.log(140,this.name),this.$emit("valueChanged",this.name)}}},ns=rs,os=(0,$.A)(ns,is,as,!1,null,"7a01fc37",null),ls=os.exports,cs=function(){var t=this,e=t._self._c;return e("div",{staticClass:"IntegerInput"},[e("b-form",{ref:"form",attrs:{novalidate:!0},on:{submit:t.onSubmit}},[e("b-form-group",[e("b-form-input",{ref:"integerInput",class:{"is-invalid":!t.isValidEmail,"is-valid":t.isValidEmail},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}}),e("div",{staticClass:"invalid-feedback"},[t._v(" "+t._s(t.$t("invalid-email"))+" ")])],1),e("b-btn",{attrs:{type:"submit"}},[t._v(t._s(t.$t("submit-button")))])],1)],1)},hs=[],us={name:"EmailInput",props:["constraints","init"],methods:{onSubmit(t){t.preventDefault(),this.$refs.form.className="was-validated",this.isValidEmail&&this.$emit("valueChanged",this.input)},isValid(t){return!!/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(t)}},computed:{isValidEmail(){return this.isValid(this.input)}},data(){return{input:null}},mounted(){this.init&&(this.input=this.init)}},ps=us,ds=(0,$.A)(ps,cs,hs,!1,null,null,null),ms=ds.exports,gs=function(){var t=this,e=t._self._c;return e("div",{staticClass:"participantId"},[e("b-form",{on:{submit:t.onSubmit}},[e("b-form-group",[e("b-form-input",{model:{value:t.input,callback:function(e){t.input=e},expression:"input"}})],1),e("b-btn",{attrs:{type:"submit"}},[t._v(t._s(t.$t("submit-button")))])],1)],1)},vs=[],bs={name:"ParticipantId",props:["constraints","init"],methods:{onSubmit(t){t.preventDefault(),this.$emit("valueChanged",this.input)}},data(){return{input:"",p_uuid:""}},computed:{getPId(){return this.$store.getters.getParticipantId}},mounted(){this.getPId?this.input=this.getPId:(this.p_uuid=(0,v.A)(),this.input=this.p_uuid),this.init&&(this.input=this.init)}},ys=bs,fs=(0,$.A)(ys,gs,vs,!1,null,null,null),ws=fs.exports,_s={name:"InputSelector",props:{reprotermsUrl:{type:String},inputType:{type:String},readOnly:{type:Boolean},title:{type:String},valueConstraints:{type:Object},fieldData:{type:Object},init:{},selected_language:{type:String},showPassOptions:{type:Object},showItemPassOptions:{type:Object},preamble:{type:String},ipAddress:{type:String}},components:{ParticipantId:ws,StudySign:ls,SaveData:ss,Radio:ct,AudioRecord:vt,TextInput:$t,TextArea:jt,EmailInput:ms,IntegerInput:Mt,FloatInput:Ft,RangeInput:Yt,DateInput:ee,DocumentUpload:oe,MultiTextInput:de,SliderInput:_e,TimeRange:Pe,SelectInput:Ue,StaticReadOnly:qe},data(){return{}},methods:{skip(){this.$emit("skip")},dontKnow(){this.$emit("dontKnow")},sendData(t){t instanceof Date?this.$emit("valueChanged",t.getFullYear()):this.$emit("valueChanged",t),this.$emit("next")}}},xs=_s,ks=(0,$.A)(xs,Z,G,!1,null,null,null),$s=ks.exports,Ss=function(){var t=this,e=t._self._c;return e("div",[t.listShow.length?e("div",[t.preambleText?e("div",{staticClass:"preamble-text mb-2"},[e("strong",[t._v(" "+t._s(t.preambleText)+" ("+t._s(t.currentIndex+1)+" / "+t._s(t.context.length)+")")])]):t._e()]):e("div",[e("h1",[t._v(t._s(t.$t("loader"))+"...")])]),e("survey-item",{key:t.currentItem["@id"],attrs:{item:t.currentItem,index:t.currentIndex,init:t.responses[t.currentItem["@id"]],responses:t.responses,selected_language:t.selected_language,reprotermsUrl:t.reprotermsUrl,score:t.score,showPassOptions:t.showPassOptions},on:{skip:function(e){return t.nextQuestion(t.currentIndex,1,0)},dontKnow:function(e){return t.nextQuestion(t.currentIndex,0,1)},next:function(e){return t.nextQuestion(t.currentIndex,0)},setData:t.setResponse}}),null!==t.showPassOptions?e("div",{staticClass:"text-right mt-3"},[e("b-button",{attrs:{variant:"default"},on:{click:t.restart}},[t._v(t._s(t.$t("restart-button")))]),t.showPassOptions["dontKnow"]?e("b-button",{attrs:{variant:"default"},on:{click:t.dontKnow}},[t._v(t._s(t.$t("dont-know")))]):t._e(),t.showPassOptions["skip"]?e("b-button",{attrs:{variant:"default"},on:{click:t.skip}},[t._v(t._s(t.$t("skip")))]):t._e()],1):t._e()],1)},Cs=[],As={name:"MultiPart",props:{reprotermsUrl:{type:String},srcUrl:{type:String},progress:{type:Number},responses:{type:Object},selected_language:{type:String,default:"en"},showPassOptions:{type:Object}},data(){return{activity:{},listShow:[],parsedJSONLD:{},visibility:{},score:0,currentIndex:0}},components:{Loader:Je},mounted(){this.srcUrl&&this.getData()},methods:{getData(){y().expand(this.srcUrl).then((t=>{this.activity=t[0],this.listShow=[0],this.$nextTick((()=>{const t=d().filter(this.context,(t=>Object.keys(this.responses).indexOf(t["@id"])>-1));t.length?this.listShow=d().map(new Array(t.length+1),((t,e)=>e)):this.listShow=[0],this.visibility=this.getVisibility(this.responses)}))})).catch((t=>{}))},getVisibility(t){const e=this.responseMapper(t);if(!d().isEmpty(this.activity[`${this.reprotermsUrl}visibility`])){const t={};return d().map(this.activity[`${this.reprotermsUrl}visibility`],(s=>{let i=s["@value"];d().isString(s["@value"])&&(i=this.evaluateString(s["@value"],e)),e[s["@index"]]&&(t[e[s["@index"]].ref]=i)})),t}return{}},responseMapper(t){const e=d().map(this.order,(t=>t["@id"]));if(this.activity[`${this.reprotermsUrl}variableMap`]){const e=this.activity[`${this.reprotermsUrl}variableMap`][0]["@list"],s=d().map(e,(e=>{const s=e[`${this.reprotermsUrl}isAbout`][0]["@id"],i=e[`${this.reprotermsUrl}variableName`][0]["@value"],a=t[s];return{key:s,val:a,qId:i}})),i={};return d().map(s,(t=>{i[t.qId]={val:t.val,ref:t.key}})),i}const s=d().map(e,(e=>{const s=t[e],i=e.split("/"),a=i[i.length-1],r=a.split(".jsonld")[0];return{key:e,val:s,qId:r}})),i={};return d().map(s,(t=>{i[t.qId]={val:t.val,ref:t.key}})),i},evaluateString(t,e){const s=Object.keys(e);let i=t;return d().map(s,(t=>{let s=e[t].val;"skipped"!==s&&"dontknow"!==s?(d().isString(s)&&(s=`'${s}'`),i=i.replace(t,s)):i=i.replace(t,0)})),Function("return "+i)()},restart(){this.currentIndex=0,this.listShow=[0],this.$emit("clearResponses")},skip(t){this.$emit("skip",t)},dontKnow(){this.$emit("dontKnow")},updateProgress(){const t=this.context.length,e=Object.keys(this.responses).length/t*100;this.$emit("updateProgress",e),100===e&&this.$emit("valueChanged",this.responses)},setResponse(t,e){this.$emit("saveResponse",this.context[e]["@id"],t);const s={...this.responses};s[this.context[e]["@id"]]=t,this.updateProgress(),this.$forceUpdate()},nextQuestion(t,e,s){document.body.scrollTop=0,document.documentElement.scrollTop=0,e&&this.setResponse("skipped",t),s&&this.setResponse("dontKnow",t),this.currentIndex<this.context.length-1&&(this.currentIndex=Object.keys(this.responses).length)}},watch:{srcUrl(){this.srcUrl&&this.getData()}},computed:{currentItem(){return this.context[this.currentIndex]},order(){return this.activity[`${this.reprotermsUrl}order`][0]["@list"]},context(){if(this.activity[`${this.reprotermsUrl}order`]){const t=this.activity[`${this.reprotermsUrl}order`][0]["@list"];return t}return[{}]},preambleText(){if(this.activity[`${this.reprotermsUrl}preamble`]){const t=d().filter(this.activity[`${this.reprotermsUrl}preamble`],(t=>t["@language"]===this.selected_language));return t[0]["@value"]}return""}}},Is=As,Ps=(0,$.A)(Is,Ss,Cs,!1,null,null,null),js=Ps.exports,Ds=function(){var t=this,e=t._self._c;return e("div",[t.listShow.length?e("div",[t.preambleText?e("div",{staticClass:"preamble-text mb-2"},[e("strong",[t._v(" "+t._s(t.preambleText)+" ")])]):t._e()]):e("div",[e("h1",[t._v(t._s(t.$t("loader"))+"...")]),e("Loader")],1),e("transition-group",{attrs:{name:"list",tag:"div",mode:"in-out"}},t._l(t.contextReverse,(function(s,i){return e("div",{key:s["@id"]+i,staticClass:"mt-3 mb-3"},[e("transition",{key:"t"+s["@id"],attrs:{name:"list"}},[t.shouldShow[i]?e("survey-item",{key:"c"+s["@id"],attrs:{item:s,index:t.contextReverse.length-i-1,init:t.responses[s["@id"]],responses:t.responses,selected_language:t.selected_language,showPassOptions:t.showPassOptions,reprotermsUrl:t.reprotermsUrl},on:{skip:function(e){return t.nextQuestion(t.contextReverse.length-i-1,1,0)},dontKnow:function(e){return t.nextQuestion(t.contextReverse.length-i-1,0,1)},next:function(e){return t.nextQuestion(t.contextReverse.length-i-1,0)},setData:t.setResponse}}):t._e()],1),e("b-modal",{ref:"invalid-token-modal",refInFor:!0,attrs:{"ok-only":"",title:"Helpline!","hide-footer":"","header-class":"justify-content-center"},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[e("p",{staticClass:"contact"},[t._v("If you're thinking about suicide, are worried about a friend or loved one, or would like emotional support, there are resources available 24/7. Your call or text is confidential and free.")]),e("p",[t._v("Call the Suicide Prevention Lifeline in the United States:")]),e("p",[t._v("English: 1-800-273-8255")]),e("p",[t._v("Espaol: 1-888-628-9454")]),e("br"),e("p",[t._v("Text the Crisis TextLine through SMS:")]),e("p",[t._v("US or Canada: 741741")]),e("p",{staticClass:"contact"},[e("a",{attrs:{href:"https://www.messenger.com/login.php?next=https%3A%2F%2Fwww.messenger.com%2Ft%2F204427966369963%2F%3Fmessaging_source%3Dsource%253Apages%253Amessage_shortlink",target:"_blank"}},[t._v("Facebook Messenger")])]),e("p",[t._v("For other countries:")]),e("p",{staticClass:"contact"},[e("a",{attrs:{href:"https://www.befrienders.org",target:"_blank"}},[t._v("www.befrienders.org")])])])],1)})),0),null!==t.showPassOptions?e("div",{staticClass:"text-right mt-3"},[e("b-button",{attrs:{variant:"default"},on:{click:t.restart}},[t._v("Restart")]),t.showPassOptions["dontKnow"]?e("b-button",{attrs:{variant:"default"},on:{click:t.dontKnow}},[t._v("Don't Know")]):t._e(),t.showPassOptions["skip"]?e("b-button",{attrs:{variant:"default"},on:{click:t.skip}},[t._v("Skip")]):t._e()],1):t._e()],1)},Os=[],Rs=s(4038),Ts=s.n(Rs);i["default"].use(Ts());var Us={name:"Section",props:{reprotermsUrl:{type:String},srcUrl:{type:String},progress:{type:Number},responses:{type:Object},selected_language:{type:String,default:"en"},showPassOptions:{type:Object}},data(){return{activity:{},listShow:[],parsedJSONLD:{},visibility:{},scores:{},currentIndex:0,showModal:!1}},components:{Loader:Je},mounted(){this.srcUrl&&(this.getData(),this.t0=performance.now())},methods:{getData(){y().expand(this.srcUrl).then((t=>{this.activity=t[0],this.listShow=[0],this.$nextTick((()=>{const t=d().filter(this.context,(t=>Object.keys(this.responses).indexOf(t["@id"])>-1));t.length?this.listShow=d().map(new Array(t.length+1),((t,e)=>e)):this.listShow=[0],this.visibility=this.getVisibility(this.responses)}))}))},getVisibility(t){const e=this.responseMapper(t);if(!d().isEmpty(this.activity["http://schema.repronim.org/addProperties"])){const t={};return d().map(this.activity["http://schema.repronim.org/addProperties"],(s=>{let i=!0;s[`${this.reprotermsUrl}isVis`]&&(i=s[`${this.reprotermsUrl}isVis`][0]["@value"]),d().isString(i)&&(i=this.evaluateString(i,e)),e[s[`${this.reprotermsUrl}variableName`][0]["@value"]]&&(t[e[s[`${this.reprotermsUrl}variableName`][0]["@value"]].ref]=i)})),t}return{}},responseMapper(t){let e;if(this.activity["http://schema.repronim.org/addProperties"]){const s=this.activity["http://schema.repronim.org/addProperties"];e=d().map(s,(e=>{const s=e["http://schema.repronim.org/isAbout"][0]["@id"],i=e["http://schema.repronim.org/variableName"][0]["@value"],a=t[s];return{key:s,val:a,qId:i}}))}if(this.$store.getters.getQueryParameters){const t=this.$store.getters.getQueryParameters;Object.entries(t).forEach((([t,s])=>{const i=t;"week"===t&&(s=parseInt(s));const a=s;e.push({key:t,val:a,qId:i})}))}const s={};return d().map(e,(t=>{s[t.qId]={val:t.val,ref:t.key}})),s},evaluateString(t,e){const s=Object.keys(e);let i=t;return d().map(s,(t=>{let s=e[t].val;Array.isArray(e[t].val)&&(s=e[t].val[0]),"http://schema.repronim.org/Skipped"!==s&&"http://schema.repronim.org/DontKnow"!==s?(d().isString(s)&&(s=`'${s}'`),i=i.replace(new RegExp(`\\b${t}\\b`),s)):i=i.replace(new RegExp(`\\b${t}\\b`),0)})),Function("return "+i)()},restart(){this.currentIndex=0,this.listShow=[0],this.$emit("clearResponses")},skip(t){this.$emit("skip",t)},dontKnow(){this.$emit("dontKnow")},updateProgress(){let t=this.context.length;d().isEmpty(this.visibility)||(t=d().filter(this.visibility).length);const e=Object.keys(this.responses).length/t*100;this.$emit("updateProgress",e),100===e&&this.$emit("next")},setResponse(t,e){const s=this.context[e]["@id"],i=new Date,a=i.toISOString();let r=`${window.location.origin}`;window.location.pathname&&(r=`${r}${window.location.pathname}`);const n=(0,v.A)(),o=(0,v.A)(),l=(this.srcUrl,this.getAnsweredLanguage,this.t0,{"@context":"https://raw.githubusercontent.com/ReproNim/reproschema/1.0.0/contexts/reproschema","@type":"reproschema:Response","@id":`uuid:${o}`,wasAttributedTo:{"@id":this.$store.state.participantUuid},isAbout:s,value:t});this.participantId&&(l.wasAttributedTo.subject_id=this.participantId),this.$emit("saveResponse",this.context[e]["@id"],t);let c={};c[this.context[e]["@id"]]=t,this.$emit("valueChanged",c),this.t0=a;const h={...this.responses};h[this.context[e]["@id"]]=t instanceof Object?l.value:t,this.visibility=this.getVisibility(h),d().isEmpty(this.activity["http://schema.repronim.org/compute"])||(d().map(this.getScoring(this.responses),((t,e)=>{d().isNaN(t)||(this.scores[e]=t)})),d().isEmpty(this.scores)||this.$emit("saveScores",this.srcUrl,this.scores)),this.updateProgress(),this.$forceUpdate()},getScoring(t){const e=this.responseMapper(t);if(!d().isEmpty(this.activity["http://schema.repronim.org/compute"])){const t={};return d().map(this.activity["http://schema.repronim.org/compute"],(s=>{let i=s[`${this.reprotermsUrl}jsExpression`][0]["@value"];const a=s[`${this.reprotermsUrl}variableName`][0]["@value"];d().isString(i)&&(i=this.evaluateString(i,e)),e[a]&&(t[e[a].ref]=i)})),t}return{}},checkAlertMessage(t){const e=this.$store.getters.getProtocolSchema;let s=0;if(!s&&e["http://schema.repronim.org/overrideProperties"]);else if(!s&&e["http://schema.repronim.org/addProperties"]){let i=d().filter(e["http://schema.repronim.org/addProperties"],(e=>{e["http://schema.repronim.org/isAbout"][0]["@id"],this.context[t]["@id"]}));s=i.length?1:0}if(!s&&this.activity["http://schema.repronim.org/overrideProperties"]);else{d().filter(this.activity["http://schema.repronim.org/addProperties"],(e=>e["http://schema.repronim.org/isAbout"][0]["@id"]===this.context[t]["@id"]&&e["http://schema.repronim.org/message"]))}const i=this.context[t]["@id"].split("/");8===t&&"phq9_9"===i[i.length-1]&&this.responses[this.context[t]["@id"]]>0&&(this.showModal=!0)},nextQuestion(t,e,s){if(document.body.scrollTop=0,document.documentElement.scrollTop=0,this.checkAlertMessage(t),e&&this.setResponse("http://schema.repronim.org/Skipped",t),s&&this.setResponse("http://schema.repronim.org/DontKnow",t),this.$forceUpdate(),t>=this.listShow.length-1){const t=d().max(this.listShow)+1;this.listShow.push(t);for(let e=t;e<this.context.length;e+=1){const t=this.order(),s=t[e]["@id"];let i=this.visibility[s];if(void 0===i&&(i=!0),i)break;this.listShow.push(e+1)}this.$store&&this.$store.dispatch("updateListShow",this.listShow)}},order(){if(this.activity["http://schema.repronim.org/shuffle"]&&this.activity["http://schema.repronim.org/shuffle"][0]["@value"]){const t=this.activity["http://schema.repronim.org/order"][0]["@list"],e=d().shuffle(t);return e}return this.activity["http://schema.repronim.org/order"][0]["@list"]}},watch:{srcUrl(){this.srcUrl&&this.getData()}},computed:{currentItem(){return this.context[this.currentIndex]},shouldShow(){return d().map(this.contextReverse,((t,e)=>{const s=this.listShow.indexOf(this.contextReverse.length-e-1)>=0;let i=!0;return d().isEmpty(this.visibility)||(i=this.visibility[t["@id"]]),s&&i}))},context(){if(this.activity["http://schema.repronim.org/order"]){const t=this.order();return t}return[{}]},contextReverse(){return this.context.length>0?this.context.slice().reverse():{}},preambleText(){if(this.activity[`${this.reprotermsUrl}preamble`]){const t=d().filter(this.activity[`${this.reprotermsUrl}preamble`],(t=>t["@language"]===this.selected_language));return t[0]["@value"]}return""},findPassOptions(){if(this.activity[this.reprotermsUrl+"allow"]){let t=!1,e=!1;return d().map(this.activity[`${this.reprotermsUrl}allow`][0]["@list"],(s=>{s["@id"]===`${this.reprotermsUrl}refused_to_answer`?t=!0:s["@id"]===`${this.reprotermsUrl}dont_know_answer`&&(e=!0)})),{skip:t,dontKnow:e}}return null}}},Ms=Us,Ls=(0,$.A)(Ms,Ds,Os,!1,null,null,null),Ns=Ls.exports,Es={name:"SurveyItem",props:{reprotermsUrl:{type:String},item:{type:Object},index:{type:Number},init:{},responses:{type:Object},selected_language:{type:String},clientIp:{type:String},showPassOptions:{type:Object},surveyStart:{type:Number},individualPassList:{type:Array}},components:{InputSelector:$s,multipart:js,subactivity:Ns,Loader:Je},data(){return{data:[],valueC:{},status:"loading",mp_responses:{},mp_progress:0,variant:null,requireVal:!1,itemAllow:{}}},computed:{style(){return"section"===this.ui||"multipart"===this.ui?{"border-color":"white","-webkit-box-flex":1,flex:"1 1 auto"}:{width:"100%"}},bodyStyle(){return"section"===this.ui||"multipart"===this.ui?{padding:0}:{}},ui(){return this.data["@type"]&&"http://schema.repronim.org/Activity"===this.data["@type"][0]?"section":this.data["http://schema.repronim.org/inputType"]?this.data["http://schema.repronim.org/inputType"][0]["@value"]:"N/A"},widgetType(){return!!this.data["http://schema.org/readonlyValue"]&&this.data["http://schema.org/readonlyValue"][0]["@value"]},title(){if(this.data["http://schema.org/question"]){const t=d().filter(this.data["http://schema.org/question"],(t=>t["@language"]===this.selected_language));if(!Array.isArray(t)||!t.length){const t=this.data["http://schema.org/question"][0]["@language"];return this.$store.dispatch("setAnsweredLanguage",t),this.data["http://schema.org/question"][0]["@value"]}return this.$store.dispatch("setAnsweredLanguage",t[0]["@language"]),t[0]["@value"]}return null},itemPreamble(){if(this.data["http://schema.repronim.org/preamble"]){const t=d().filter(this.data["http://schema.repronim.org/preamble"],(t=>t["@language"]===this.selected_language));return t[0]["@value"]}return null},valueConstraints(){return this.data["http://schema.repronim.org/responseOptions"]?this.valueC:{requiredValue:!1}},fieldData(){return this.data},findPassOptions(){if(this.data["http://schema.repronim.org/responseOptions"]){if(Object.keys(this.data["http://schema.repronim.org/responseOptions"][0]).indexOf("@id")>-1)return this.getRequiredVal(),this.requireVal;if(this.data["http://schema.repronim.org/responseOptions"][0]&&this.data["http://schema.repronim.org/responseOptions"][0]["http://schema.org/valueRequired"])return this.data["http://schema.repronim.org/responseOptions"][0]["http://schema.org/valueRequired"][0]["@value"]}return!1}},methods:{getRequiredVal(){y().expand(this.data["http://schema.repronim.org/responseOptions"][0]["@id"]).then((t=>{this.requireVal=t[0]["http://schema.org/valueRequired"][0]["@value"]})).catch((t=>{y().expand(`${this.data["http://schema.repronim.org/responseOptions"][0]["@id"]}.jsonld`).then((t=>{this.requireVal=t[0]["http://schema.org/valueRequired"][0]["@value"]})).catch((t=>{}))}))},getValueConstraintsData(t){y().expand(t).then((t=>{this.valueC=t[0]})).catch((e=>{y().expand(`${t}.jsonld`).then((t=>{this.valueC=t[0]})).catch((t=>{}))}))},processActivityData(t){t.length&&(this.data=t[0],this.data["http://schema.repronim.org/responseOptions"]?Object.keys(this.data["http://schema.repronim.org/responseOptions"][0]).indexOf("@id")>-1?this.getValueConstraintsData(this.data["http://schema.repronim.org/responseOptions"][0]["@id"]):this.valueC=this.data["http://schema.repronim.org/responseOptions"][0]:this.valueC={"@value":null},this.status="ready")},getData(){d().filter(this.individualPassList,(t=>{if(t["http://schema.repronim.org/isAbout"][0]["@id"]===this.item["@id"]){let e={};const s=d().filter(t["http://schema.repronim.org/allow"],(t=>"http://schema.repronim.org/Skipped"===t["@id"]));s.length?e["skip"]=!0:e["skip"]=!1;const i=d().filter(t["http://schema.repronim.org/allow"],(t=>"http://schema.repronim.org/DontKnow"===t["@id"]));i.length?e["dontKnow"]=!0:e["dontKnow"]=!1,this.itemAllow=e}})),y().expand(this.item["@id"],{onDownloadProgress(){}}).then((t=>{this.processActivityData(t)})).catch((t=>{y().expand(`${this.item["@id"]}.jsonld`).then((t=>{this.processActivityData(t)})).catch((t=>{}))}))},sendSkip(t){t&&(this.variant="warning"),this.$emit("skip")},sendDontKnow(){this.variant="info",this.$emit("dontKnow")},sendNext(){this.$emit("next")},sendData(t){this.variant=null,this.$emit("setData",t,this.index,this.mp_progress)},sendDataAndGoNext(t){this.variant=null,this.$emit("setData",t,this.index),this.sendNext()},setScore(t,e){this.$emit("setScores",e,this.index)},setMPResponse(t,e){this.mp_responses[t]=e},clearMPResponses(){this.mp_responses={},this.mp_progress=0,this.$emit("setData",{},this.index)},setMPProgress(t){this.mp_progress=t}},mounted(){this.getData(),this.init&&("skipped"===this.init?this.variant="warning":"dontKnow"===this.init&&(this.variant="info"))},watch:{item:{handler(){this.getData()},deep:!0}}},Vs=Es,qs=(0,$.A)(Vs,Y,J,!1,null,"75865be5",null),Fs=qs.exports;i["default"].component("survey-item",Fs);var zs={name:"Survey",props:["reprotermsUrl","srcUrl","responses","selected_language","progress","autoAdvance","actVisibility","nextActivity","ipAddress","participantID"],data(){return{activity:{},listShow:[],parsedJSONLD:{},visibility:{},scores:{},isSkip:!1,isDontKnow:!1,isVis:!1,individualPassList:[],downloadAndSubmit:j().downloadAndSubmit}},components:{Loader:Je},methods:{getData(){y().expand(this.srcUrl).then((t=>{this.activity=t[0],this.findIndividualPassOptions(),this.$nextTick((()=>{const t=d().filter(this.context,(t=>Object.keys(this.responses).indexOf(t["@id"])>-1));t.length?this.listShow=d().map(new Array(t.length+1),((t,e)=>e)):this.listShow=[this.initializeListShow()],this.visibility=this.getVisibility(this.responses)}))}))},findIndividualPassOptions(){this.activity["http://schema.repronim.org/addProperties"]&&(this.individualPassList=d().filter(this.activity["http://schema.repronim.org/addProperties"],(t=>{if(t.hasOwnProperty("http://schema.repronim.org/allow"))return t})))},initializeListShow(){const t=this.responseMapper(this.responses);let e=0;for(e=0;e<this.context.length;e+=1){const s=this.context[e],i=d().filter(this.activity["http://schema.repronim.org/addProperties"],(t=>t["http://schema.repronim.org/isAbout"][0]["@id"]===s["@id"]));let a=!0;if(i[0]["http://schema.repronim.org/isVis"]&&(a=i[0]["http://schema.repronim.org/isVis"][0]["@value"]),d().isString(a)&&(a=this.evaluateString(a,t)),!0===a)break}return e},getScoring(t){const e=this.responseMapper(t);if(!d().isEmpty(this.activity["http://schema.repronim.org/compute"])){const t={};return d().map(this.activity["http://schema.repronim.org/compute"],(s=>{let i=s["http://schema.repronim.org/jsExpression"][0]["@value"];const a=s["http://schema.repronim.org/variableName"][0]["@value"];d().isString(i)&&(i=this.evaluateString(i,e)),e[a]&&(t[e[a].ref]=i)})),t}return{}},nextQuestion(t,e,s){if(document.body.scrollTop=0,document.documentElement.scrollTop=0,e&&(this.$emit("saveResponse",this.context[t]["@id"],"http://schema.repronim.org/Skipped"),this.setResponse("http://schema.repronim.org/Skipped",t)),s&&(this.$emit("saveResponse",this.context[t]["@id"],"http://schema.repronim.org/DontKnow"),this.setResponse("http://schema.repronim.org/DontKnow",t)),this.$forceUpdate(),t>=this.listShow.length-1){const t=d().max(this.listShow)+1;this.listShow.push(t);for(let e=t;e<this.context.length;e+=1){const t=this.order(),s=t[e]["@id"];let i=this.visibility[s];if(void 0===i&&(i=!0),i)break;this.listShow.push(e+1)}this.$store&&this.$store.dispatch("updateListShow",this.listShow)}},computeNewShow(t){return d().map(this.contextReverse,((e,s)=>{const i=t.indexOf(this.contextReverse.length-s-1)>=0;let a=!0;return d().isEmpty(this.visibility)||(a=this.visibility[e["@id"]]),i&&a}))},setResponse(t,e,s=100){const i=this.context[e]["@id"];let a=t,r=[],n=i;if(d().isObject(t)&&!t.hasOwnProperty("unitCode")&&!(t instanceof Blob)){const e=Object.keys(t)[0],s=Object.values(t)[0];a=s,r.push(e),n=e}r.push(`${i}`,`${this.srcUrl}`);const o=new Date,l=o.toISOString();let c=`${window.location.origin}`;window.location.pathname&&(c=`${c}${window.location.pathname}`);const h=(0,v.A)(),u=(0,v.A)(),p={"@context":"https://raw.githubusercontent.com/ReproNim/reproschema/1.0.0/contexts/reproschema","@type":"reproschema:ResponseActivity","@id":`uuid:${h}`,used:r,inLanguage:this.getAnsweredLanguage,startedAtTime:this.t0,endedAtTime:l,wasAssociatedWith:{version:"0.0.1",url:c,"@id":"https://github.com/ReproNim/reproschema-ui"},generated:`uuid:${u}`},m={"@context":"https://raw.githubusercontent.com/ReproNim/reproschema/1.0.0/contexts/reproschema","@type":"reproschema:Response","@id":`uuid:${u}`,wasAttributedTo:{"@id":this.$store.state.participantUuid},isAbout:n,value:a};this.participantId&&(m.wasAttributedTo.subject_id=this.participantId);const g=[t,p,m];this.$emit("saveResponse",this.context[e]["@id"],g),this.t0=l;const b={...this.responses};b[this.context[e]["@id"]]=t instanceof Object?m.value:t,this.visibility=this.getVisibility(b),d().isEmpty(this.activity["http://schema.repronim.org/compute"])||(d().map(this.getScoring(this.responses),((t,e)=>{d().isNaN(t)||(this.scores[e]=t)})),d().isEmpty(this.scores)||this.$emit("saveScores",this.srcUrl,this.scores)),this.updateProgress(s)},setScore(t,e){this.$emit("saveScores",this.context[e]["@id"],t)},restart(){this.$emit("clearResponses"),this.listShow=[this.initializeListShow()]},evaluateString(t,e){const s=Object.keys(e);let i=t;return d().map(s,(s=>{let a=e[s].val;"http://schema.repronim.org/Skipped"!==a&&"http://schema.repronim.org/DontKnow"!==a?(d().isString(a)?a=`'${a}'`:d().isArray(a)?a=`[${a}]`:!a&&t.includes("includes")&&(a="[]"),i=i.replace(new RegExp(`\\b${s}\\b`),a)):i=i.replace(new RegExp(`\\b${s}\\b`),0)})),Function("return "+i)()},responseMapper(t){let e;if(this.activity["http://schema.repronim.org/addProperties"]){const s=this.activity["http://schema.repronim.org/addProperties"];e=d().map(s,(e=>{const s=e["http://schema.repronim.org/isAbout"][0]["@id"],i=e["http://schema.repronim.org/variableName"][0]["@value"],a=t[s];return{key:s,val:a,qId:i}}))}const s={};if(d().map(e,(t=>{s[t.qId]={val:t.val,ref:t.key}})),this.$store.state.responseMap[this.activity["@id"]]=s,this.$store.getters.getQueryParameters){const t=this.$store.getters.getQueryParameters;Object.entries(t).forEach((([t,s])=>{const i=t;"week"===t&&(s=parseInt(s));const a=s;e.push({key:t,val:a,qId:i})}))}const i={};return d().map(e,(t=>{i[t.qId]={val:t.val,ref:t.key}})),i},getVisibility(t){const e=this.responseMapper(t);if(!d().isEmpty(this.activity["http://schema.repronim.org/addProperties"])){const t={};return d().map(this.activity["http://schema.repronim.org/addProperties"],(s=>{let i=!0;s["http://schema.repronim.org/isVis"]&&(i=s["http://schema.repronim.org/isVis"][0]["@value"]),d().isString(i)&&(i=this.evaluateString(i,e)),e[s["http://schema.repronim.org/variableName"][0]["@value"]]&&(t[e[s["http://schema.repronim.org/variableName"][0]["@value"]].ref]=i)})),t}return{}},updateProgress(t=100){let e=this.context.length;d().isEmpty(this.visibility)||(e=0,d().map(this.context,(t=>{t["@id"]in this.visibility&&this.visibility[t["@id"]]&&(e+=1)})));const s=(Object.keys(this.responses).length-1+t/100)/e*100;this.$emit("updateProgress",s)},order(){if(this.activity["http://schema.repronim.org/shuffle"]&&this.activity["http://schema.repronim.org/shuffle"][0]["@value"]){const t=this.activity["http://schema.repronim.org/order"][0]["@list"],e=d().shuffle(t);return e}return this.activity["http://schema.repronim.org/order"][0]["@list"]},nextActivity1(){this.uploadZipData();const t=parseInt(this.$store.state.activityIndex),e=d().map(this.actVisibility,((t,e)=>!0===t?e:"")).filter(String),s=e[e.indexOf(t)+1];this.$route.query.url?this.$router.push(`/activities/${s}?url=${this.$route.query.url}`):this.$router.push(`/activities/${s}`)},uploadZipData(){const t=this.$store.state.exportResponses,e=this.$store.state.scores,s=this.$store.state.participantId,i={response:t,scores:e,participantId:s};this.formatData(i)},formatData(t){const e=parseInt(this.$store.state.activityIndex),s=this.$store.getters.getAuthToken,i=this.$store.state.expiryMinutes,a=new(g()),r=`${(0,v.A)()}-${this.participantId}-activity${e}`;d().map(t.response[e],(t=>{const e={...t};if("reproschema:Response"===t["@type"]&&t.value instanceof Blob){const s=t.isAbout.split("/"),i=t["@id"].split("uuid:")[1];a.folder(r).file(`${s[s.length-1]}-${i}.wav`,t.value),e.value=`${s[s.length-1]}-${i}.wav`}})),a.folder(r).file(`activity_${e}.jsonld`,JSON.stringify(t.response[e],null,4)),a.generateAsync({type:"blob"}).then((t=>{const e=new FormData;e.append("file",t,`${r}.zip`),e.append("auth_token",`${s}`),e.append("expires",`${i}`),this.sendRetry(`${j().backendServer}/submit`,e)}))},async sendRetry(t,e,s=3,i=1e4){const a={"Content-Type":"multipart/form-data"};try{await o.A.post(`${j().backendServer}/submit`,e,a)}catch(r){s>0?setTimeout((()=>this.sendRetry(t,e,s-1,2*i)),i):console.log(r.response.status)}}},watch:{$route(){this.getData(),this.readyForActivity&&this.$store&&this.$store.dispatch("getActivityData")},actVisibility:{deep:!0,handler(t){this.isVis=d().some(t)}},listContentRev(){this.$forceUpdate()},listShow(){this.updateProgress()},srcUrl(){this.srcUrl&&this.getData()},readyForActivity(){this.readyForActivity&&this.$store&&this.$store.dispatch("getActivityData")},storeContext(){this.$store&&this.$store.dispatch("setActivityList",this.storeContext)}},computed:{complete(){return this.progress>=100},getAnsweredLanguage(){return this.$store.getters.getAnsweredLanguage},storeContext(){if(this.$store){const t=this.$store.state;if(t.activities.length&&null!=t.activityIndex&&t.activities[t.activityIndex].activity){const e=t.activities[t.activityIndex].activity,s=e["http://schema.repronim.org/order"][0]["@list"];return s}}return[{}]},shouldShow(){return d().map(this.contextReverse,((t,e)=>{const s=this.listShow.indexOf(this.contextReverse.length-e-1)>=0;let i=!0;return d().isEmpty(this.visibility)||(i=this.visibility[t["@id"]]),s&&i}))},context(){if(this.activity["http://schema.repronim.org/order"]){const t=this.order();return t}return[{}]},contextReverse(){return this.context.length>0?this.context.slice().reverse():{}},preambleText(){if(this.activity["http://schema.repronim.org/preamble"]){const t=d().filter(this.activity["http://schema.repronim.org/preamble"],(t=>t["@language"]===this.selected_language));return Array.isArray(t)&&t.length?t[0]["@value"]:this.activity["http://schema.repronim.org/preamble"][0]["@value"]}return""},readyForActivity(){if(this.$store)return this.$store.getters.readyForActivity},findOverallPassOptions(){if(this.activity["http://schema.repronim.org/allow"]){let t=!1,e=!1;return d().map(this.activity["http://schema.repronim.org/allow"][0]["@list"],(s=>{"http://schema.repronim.org/Skipped"===s["@id"]?t=!0:"http://schema.repronim.org/DontKnow"===s["@id"]&&(e=!0)})),{skip:t,dontKnow:e}}return null},activityUrl(){return this.srcUrl},currentActivityIndex(){return parseInt(this.$store.state.activityIndex)},participantId(){return this.$store.state.participantId},getparticipantUUID(){return this.$store.getters.getparticipantUUID}},mounted(){this.srcUrl&&this.getData();const t=new Date;this.t0=t.toISOString()}},Ks=zs,Bs=(0,$.A)(Ks,H,Q,!1,null,"13dbb8d9",null),Hs=Bs.exports,Qs=function(){var t=this,e=t._self._c;return e("div",{staticClass:"docked-layout"},[t.selectedContent?e("section",{staticClass:"smooth-scroller",staticStyle:{"padding-top":"0"},attrs:{id:"smooth-scroller"}},[e("vue-markdown",{attrs:{source:t.selectedContent.content}})],1):e("Loader"),e("p",{staticClass:"button-para"},[e("button",{staticClass:"join-button",on:{click:t.doNext}},[t._v(t._s(t.$t("join-button")))])])],1)},Ys=[],Js=s(9806),Zs=s.n(Js),Gs={name:"Landing",props:{selected_language:{type:String},nextActivity:{type:Object},actVisibility:{type:Array}},components:{VueMarkdown:Zs(),Loader:Je},data(){return{content:{},consent:j().consent}},computed:{reprotermsUrl(){return this.$store.getters.getTermsUrl},selectedContent(){const t=d().filter(this.$store.state.landing,(t=>t["@language"]===this.selected_language));return d().isEmpty(t)?this.$store.state.landing[0]:t[0]},activityUrl(){return this.srcUrl}},methods:{doBack(){this.step>1&&(this.step-=1)},doNext(){const t=parseInt(this.$store.state.activityIndex),e=d().map(this.actVisibility,((t,e)=>!0===t?e:"")).filter(String),s=e[e.indexOf(t)+1];this.$route.query.url?this.$router.push(`/activities/${s}?url=${this.$route.query.url}`):this.$router.push(`/activities/${s}`)}}},Ws=Gs,Xs=(0,$.A)(Ws,Qs,Ys,!1,null,"310eb898",null),ti=Xs.exports,ei=function(){var t=this,e=t._self._c;return e("div",{staticClass:"docked-layout"},[e("section",[e("div",{staticClass:"container"},[e("div",{directives:[{name:"show",rawName:"v-show",value:1===t.step,expression:"step === 1"}],staticClass:"screen"},[e("div",{staticClass:"panel"},[e("BridgeImage",{attrs:{src:"static/images/about%20the%20study.svg"}}),e("h3",[t._v("About the study")]),e("p",[t._v("Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam eu sagittis leo, sit amet consectetur mi. Donec volutpat rutrum massa et luctus. Fusce ac dui quam. Nam a nibh porttitor, tincidunt libero id, condimentum velit. Praesent ultricies consectetur nulla vel pharetra. ")])],1)]),e("div",{directives:[{name:"show",rawName:"v-show",value:2===t.step,expression:"step === 2"}],staticClass:"screen"},[e("div",{staticClass:"panel"},[e("BridgeImage",{attrs:{src:"static/images/procedures%20activities.svg"}}),e("h3",[t._v("How does the study work?")]),t._m(0)],1)]),e("div",{directives:[{name:"show",rawName:"v-show",value:3===t.step,expression:"step === 3"}],staticClass:"screen"},[e("div",{staticClass:"panel"},[e("BridgeImage",{attrs:{src:"static/images/how%20long%20does%20it%20last.svg"}}),e("h3",[t._v("How long does it last?")]),e("p",[t._v("We will ask you to participate for 2 weeks every three months. We would like you to participate for 2 years, but you can participate as long as you like.")])],1)]),e("div",{directives:[{name:"show",rawName:"v-show",value:4===t.step,expression:"step === 4"}],staticClass:"screen"},[e("div",{staticClass:"panel"},[e("BridgeImage",{attrs:{src:"static/images/benefits%20and%20risks.svg"}}),e("h3",[t._v("What are the benefits and risks?")]),e("p",[t._v("You may not directly benefit from taking part but seeing trends in your data may be interesting to you. You may help researchers better understand PD.")]),e("p",[t._v("The main risk is to your privacy by an accidental release of your data. You may find some of the activities tiring and seeing your data may be stressful.")])],1)])])]),e("div",{staticClass:"buttons"},[e("button",{attrs:{disabled:1===this.step},on:{click:t.doBack}},[t._v("Back")]),e("button",{on:{click:t.doNext}},[t._v(t._s(t.nextName))])])])},si=[function(){var t=this,e=t._self._c;return e("p",[t._v(" 1. Answer questions to determine if you are eligible for this study "),e("br"),t._v(" 2. Complete the informed consent process & download the app"),e("br"),t._v(" 3. Complete a one-time health survey"),e("br"),t._v(" 4. Complete short physical and cognitive activities "),e("br"),t._v(" 5. Track your symptoms, triggers, and medications ")])}],ii={name:"StudyIntroduction",data(){return{step:1,totalSteps:4}},computed:{nextName(){return this.step===this.totalSteps?"Start":"Next"},appletURL(){return"https://raw.githubusercontent.com/ReproNim/reproschema/master/activity-sets/VoicePilot/VoicePilot_schema"},redirect(){return{name:"Applet",params:{appletId:this.appletURL},query:{...this.query,consent:!0}}}},methods:{doBack(){this.step>1&&(this.step-=1)},doNext(){this.step<this.totalSteps?this.step+=1:this.step===this.totalSteps&&this.$router.push("/activities/0")},learnMore(){this.$refs.consentViewer.toggleMax()}}},ai=ii,ri=(0,$.A)(ai,ei,si,!1,null,"dd30dc8c",null),ni=ri.exports;i["default"].use(B.Ay);const oi=new B.Ay({routes:[{path:"/",name:"Landing",component:ti,props:{startButton:j().startButton}},{path:"/study/intro",name:ni,component:ni},{path:"/activities/:id",name:"Home",component:Hs}]});oi.beforeEach(((t,e,s)=>{e.query.auth_token&&!t.query.auth_token||e.query.uid&&!t.query.uid?e.path===t.path?s(!1):s({path:t.path,query:e.query}):s()}));var li=oi,ci=s(5353);window.jsonld=y(),i["default"].use(ci.Ay);const hi={schema:{},progress:[],responses:[],responseMap:{},exportResponses:[],scores:{},participantId:"",activities:[],activityIndex:null,storeReady:!1,activityReady:!1,termUrl:"http://schema.repronim.org/",schemaType:"",answeredLanguage:"",participantUuid:"",expiryMinutes:null,queryParams:{},token:null,landing:[],hasExport:!1},ui={getParticipantId(t){return t.participantId},getschemaType(t){return t.schemaType},getTermsUrl(t){return t.termUrl},getLand(t){return t.landing},srcUrl(t){return!d().isEmpty(t.schema)&&t.activityIndex?(t.schemaType=t.schema["@type"][0].split("/").slice(-1)[0],"Activity"===t.schemaType?t.schema["@id"]:t.schema[`${t.termUrl}order`][0]["@list"][t.activityIndex]["@id"]):null},readyForActivity(t){return t.storeReady&&t.activityReady},getAnsweredLanguage(t){return t.answeredLanguage},getProtocolSchema(t){return t.schema},getQueryParameters(t){return t.queryParams},getAuthToken(t){return t.token},getHasExport(t){return t.hasExport},getExpiryTime(t){return t.expiryMinutes}},pi={async setReprotermUrl(t,e){o.A.get(e).then((e=>{const s=e.data["@context"];o.A.get(s).then((e=>{t.termUrl="http://schema.repronim.org/"}))}))},async setBaseSchema(t,e){if(t.schema=e[0],t.progress=d().map(e[0][`${t.termUrl}order`][0]["@list"],(()=>0)),t.responses=d().map(e[0][`${t.termUrl}order`][0]["@list"],(()=>({}))),t.exportResponses=d().map(e[0][`${t.termUrl}order`][0]["@list"],(()=>[])),t.scores=d().map(e[0][`${t.termUrl}order`][0]["@list"],(()=>({}))),t.activities=d().map(e[0][`${t.termUrl}order`][0]["@list"],(()=>({}))),t.storeReady=!0,t.schema["http://schema.repronim.org/landingPage"]){const e=t.schema["http://schema.repronim.org/landingPage"],s=e.map((async t=>{const e={},s=await o.A.get(t["@id"]);return e["@language"]=t["http://schema.org/inLanguage"][0]["@value"],e.content=s.data,e}));t.landing=await Promise.all(s)}},setActivityIndex(t,e){t.activityIndex=e,t.activityReady=!0},setAuthToken(t,e){t.token=e},setParticipantUUID(t,e){t.participantUuid=e},setExpiryMinutes(t,e){t.expiryMinutes=e},setQueryParameters(t,e){t.queryParams=e},saveResponse(t,{key:e,value:s}){const i=s[0],a=s[1],r=s[2];t.responses[t.activityIndex][e]=i,t.exportResponses[t.activityIndex].push(a,r)},saveScores(t,{key:e,scoreObj:s}){t.scores[t.activityIndex][e]=s},saveParticipantId(t,e){t.participantId=e},updateProgress(t,e){t.progress[t.activityIndex]=e},setActivityData(t,e){t.activities[t.activityIndex].activity=e[0],t.activities[t.activityIndex].listShow=[0]},setListShow(t,e){t.activities[t.activityIndex].listShow=e},setAnsweredLanguage(t,e){t.answeredLanguage=e},setActivityList(t,e){t.activities[t.activityIndex]&&(t.activities[t.activityIndex].activityList=e)},clearResponses(t,e){t.responses[e]={},t.progress[e]=0},setExport(t,e){t.hasExport=e}},di={async getReproTerm({commit:t},e){t("setReprotermUrl",e)},async getBaseSchema({commit:t},e){t("setBaseSchema",await y().expand(e||j().githubSrc))},async setActivityIndex({commit:t},e){t("setActivityIndex",e)},saveParticipantId({commit:t},e){t("saveParticipantId",e)},saveResponse({commit:t},{key:e,value:s}){t("saveResponse",{key:e,value:s})},saveScores({commit:t},{key:e,scoreObj:s}){t("saveScores",{key:e,scoreObj:s})},updateProgress({commit:t},e){t("updateProgress",e)},async getActivityData({commit:t,getters:e}){return t("setActivityData",await y().expand(e.srcUrl))},updateListShow({commit:t},e){t("setListShow",e)},setAnsweredLanguage({commit:t},e){t("setAnsweredLanguage",e)},setActivityList({commit:t},e){t("setActivityList",e)},clearResponses({commit:t},e){t("clearResponses",e)},setParticipantUUID({commit:t},e){t("setParticipantUUID",e)},setAuthToken({commit:t},e){t("setAuthToken",e)},setExpiryMinutes({commit:t},e){t("setExpiryMinutes",e)},setQueryParameters({commit:t},e){t("setQueryParameters",e)},setExport({commit:t},e){t("setExport",e)}};var mi=new ci.Ay.Store({state:hi,getters:ui,mutations:pi,actions:di});i["default"].config.productionTip=!1,new i["default"]({el:"#app",store:mi,router:li,components:{App:K},i18n:L,render:t=>t(K)})},5358:function(t,e,s){var i={"./af":5177,"./af.js":5177,"./ar":1509,"./ar-dz":1488,"./ar-dz.js":1488,"./ar-kw":8676,"./ar-kw.js":8676,"./ar-ly":2353,"./ar-ly.js":2353,"./ar-ma":4496,"./ar-ma.js":4496,"./ar-ps":6947,"./ar-ps.js":6947,"./ar-sa":2682,"./ar-sa.js":2682,"./ar-tn":9756,"./ar-tn.js":9756,"./ar.js":1509,"./az":5533,"./az.js":5533,"./be":8959,"./be.js":8959,"./bg":7777,"./bg.js":7777,"./bm":4903,"./bm.js":4903,"./bn":1290,"./bn-bd":7357,"./bn-bd.js":7357,"./bn.js":1290,"./bo":1545,"./bo.js":1545,"./br":1470,"./br.js":1470,"./bs":4429,"./bs.js":4429,"./ca":7306,"./ca.js":7306,"./cs":6464,"./cs.js":6464,"./cv":3635,"./cv.js":3635,"./cy":4226,"./cy.js":4226,"./da":3601,"./da.js":3601,"./de":7853,"./de-at":6111,"./de-at.js":6111,"./de-ch":4697,"./de-ch.js":4697,"./de.js":7853,"./dv":708,"./dv.js":708,"./el":4691,"./el.js":4691,"./en-au":3872,"./en-au.js":3872,"./en-ca":8298,"./en-ca.js":8298,"./en-gb":6195,"./en-gb.js":6195,"./en-ie":6584,"./en-ie.js":6584,"./en-il":5543,"./en-il.js":5543,"./en-in":9033,"./en-in.js":9033,"./en-nz":9402,"./en-nz.js":9402,"./en-sg":3004,"./en-sg.js":3004,"./eo":2934,"./eo.js":2934,"./es":7650,"./es-do":838,"./es-do.js":838,"./es-mx":7730,"./es-mx.js":7730,"./es-us":6575,"./es-us.js":6575,"./es.js":7650,"./et":3035,"./et.js":3035,"./eu":3508,"./eu.js":3508,"./fa":119,"./fa.js":119,"./fi":527,"./fi.js":527,"./fil":5995,"./fil.js":5995,"./fo":2477,"./fo.js":2477,"./fr":5498,"./fr-ca":6435,"./fr-ca.js":6435,"./fr-ch":7892,"./fr-ch.js":7892,"./fr.js":5498,"./fy":7071,"./fy.js":7071,"./ga":1734,"./ga.js":1734,"./gd":217,"./gd.js":217,"./gl":7329,"./gl.js":7329,"./gom-deva":2124,"./gom-deva.js":2124,"./gom-latn":3383,"./gom-latn.js":3383,"./gu":5050,"./gu.js":5050,"./he":1713,"./he.js":1713,"./hi":3861,"./hi.js":3861,"./hr":6308,"./hr.js":6308,"./hu":609,"./hu.js":609,"./hy-am":7160,"./hy-am.js":7160,"./id":4063,"./id.js":4063,"./is":9374,"./is.js":9374,"./it":8383,"./it-ch":1827,"./it-ch.js":1827,"./it.js":8383,"./ja":3827,"./ja.js":3827,"./jv":9722,"./jv.js":9722,"./ka":1794,"./ka.js":1794,"./kk":7088,"./kk.js":7088,"./km":6870,"./km.js":6870,"./kn":4451,"./kn.js":4451,"./ko":3164,"./ko.js":3164,"./ku":8174,"./ku-kmr":6181,"./ku-kmr.js":6181,"./ku.js":8174,"./ky":8474,"./ky.js":8474,"./lb":9680,"./lb.js":9680,"./lo":5867,"./lo.js":5867,"./lt":5766,"./lt.js":5766,"./lv":9532,"./lv.js":9532,"./me":8076,"./me.js":8076,"./mi":1848,"./mi.js":1848,"./mk":306,"./mk.js":306,"./ml":3739,"./ml.js":3739,"./mn":9053,"./mn.js":9053,"./mr":6169,"./mr.js":6169,"./ms":3386,"./ms-my":2297,"./ms-my.js":2297,"./ms.js":3386,"./mt":7075,"./mt.js":7075,"./my":2264,"./my.js":2264,"./nb":2274,"./nb.js":2274,"./ne":8235,"./ne.js":8235,"./nl":2572,"./nl-be":3784,"./nl-be.js":3784,"./nl.js":2572,"./nn":4566,"./nn.js":4566,"./oc-lnc":9330,"./oc-lnc.js":9330,"./pa-in":9849,"./pa-in.js":9849,"./pl":4418,"./pl.js":4418,"./pt":9834,"./pt-br":8303,"./pt-br.js":8303,"./pt.js":9834,"./ro":4457,"./ro.js":4457,"./ru":2271,"./ru.js":2271,"./sd":1221,"./sd.js":1221,"./se":3478,"./se.js":3478,"./si":7538,"./si.js":7538,"./sk":5784,"./sk.js":5784,"./sl":6637,"./sl.js":6637,"./sq":6794,"./sq.js":6794,"./sr":5719,"./sr-cyrl":3322,"./sr-cyrl.js":3322,"./sr.js":5719,"./ss":6e3,"./ss.js":6e3,"./sv":1011,"./sv.js":1011,"./sw":748,"./sw.js":748,"./ta":1025,"./ta.js":1025,"./te":1885,"./te.js":1885,"./tet":8861,"./tet.js":8861,"./tg":6571,"./tg.js":6571,"./th":5802,"./th.js":5802,"./tk":9527,"./tk.js":9527,"./tl-ph":9231,"./tl-ph.js":9231,"./tlh":1052,"./tlh.js":1052,"./tr":5096,"./tr.js":5096,"./tzl":9846,"./tzl.js":9846,"./tzm":1765,"./tzm-latn":7711,"./tzm-latn.js":7711,"./tzm.js":1765,"./ug-cn":8414,"./ug-cn.js":8414,"./uk":6618,"./uk.js":6618,"./ur":158,"./ur.js":158,"./uz":7609,"./uz-latn":2475,"./uz-latn.js":2475,"./uz.js":7609,"./vi":1135,"./vi.js":1135,"./x-pseudo":4051,"./x-pseudo.js":4051,"./yo":2218,"./yo.js":2218,"./zh-cn":2648,"./zh-cn.js":2648,"./zh-hk":1632,"./zh-hk.js":1632,"./zh-mo":1541,"./zh-mo.js":1541,"./zh-tw":304,"./zh-tw.js":304};function a(t){var e=r(t);return s(e)}function r(t){if(!s.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}a.keys=function(){return Object.keys(i)},a.resolve=r,t.exports=a,a.id=5358},5432:function(t,e,s){var i={"./en.json":4174,"./es.json":6725};function a(t){var e=r(t);return s(e)}function r(t){if(!s.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}a.keys=function(){return Object.keys(i)},a.resolve=r,t.exports=a,a.id=5432},400:function(t,e,s){"use strict";t.exports=s.p+"img/403-Access-Forbidden-HTML-Template.e2da77e6.gif"},6425:function(t,e,s){"use strict";t.exports=s.p+"img/audio-permission-setting-chrome.c361007d.gif"},2370:function(t,e,s){"use strict";t.exports=s.p+"img/audio-permission-setting-firefox.e079f901.gif"},1823:function(t,e,s){"use strict";t.exports=s.p+"img/audio-permission-setting-safari.c982a870.gif"},4174:function(t){"use strict";t.exports=JSON.parse('{"join-button":"Join","start-button":"Start","stop-button":"Stop","pause-button":"Pause","play-button":"Play","finish-button":"Finish","redo-recording":"Redo Recording","continue":"Continue","record-button":"Record","x-seconds-left":"seconds left","next-button":"Next","upload-button":"Upload","download-and-submit-button":"Download & Submit","export-button":"Download","submit-button":"Submit","restart-button":"Restart","dont-know":"Don\'t know","skip":"Skip","unit":"unit","audio-support-msg":"Oh no, your browser doesn\'t support audio!","invalid-email":"Invalid Email Address","select-invalid-query":"Oops! No elements found. Consider changing the search query.","invalid-feedback-number":"Please enter a number","timeout-message":"Please contact the researchers for a new submission link with an email to","input-selector-alert":"This item does not have a title defined","loader":"Loading","review-and-next":"Click \\"Next\\" below:","save-data":"Please save your data now.","export-and-finish":"Please click \\"Finish\\" below to submit your responses. You can additionally click the \\"Download\\" button on sidebar if you wish to download a personal copy of your data.","finish":"Click below to finish.","home-button":"Home","help-button":"Help","select-year":"Select year","prepare-upload":"Preparing for upload.. ","upload-message":"Uploading... This generally takes a few seconds for fast connections or longer depending on your connection speed","safari-notification":"Your microphone does not work with Chrome. Please copy the link from the email and paste it into a Safari browser.","permission-refresh":"If you already changed permissions you need to refresh the page.","permission-change-notification":"Please change your browser\'s microphone permissions in order to answer these questions."}')},6725:function(t){"use strict";t.exports=JSON.parse('{"join-button":"Participar","start-button":"Comenzar","stop-button":"Parar","pause-button":"Pausar","play-button":"Reproducir","finish-button":"Terminar","redo-recording":"Rehacer grabacin","continue":"Continuar","record-button":"Grabar","x-seconds-left":"segundos restantes","next-button":"Siguiente","upload-button":"Enviar","download-and-submit-button":"Descargar & Enviar","export-button":"Descargar","submit-button":"Enviar","restart-button":"Reiniciar","dont-know":"No s","skip":"Saltear","unit":"unit_es","audio-support-msg":"Uy! Su navegador no puede grabar audio!","invalid-email":"Email incorrecto","select-invalid-query":"Uy! Ningn elemento se encontr. Considere cambiar la bsqueda.","invalid-feedback-number":"Por favor ingrese un nmero","timeout-message":"Por favor contacte a los investigadores para un nuevo enlace escribiendo un email a","input-selector-alert":"Este tem no tiene ttulo","loader":"Cargando","review-and-next":"Haga click en Siguiente para continuar:","save-data":"Por favor guarde sus respuestas ahora.","export-and-finish":"Puede hacer click en el botn Descargar en el men si desea guardar sus respuestas. Para terminar, haga click en Enviar.","finish":"Para terminar, haga click en Enviar.","home-button":"Inicio","help-button":"Ayuda","select-year":"Seleccione el ao","upload-message":"Enviando... Esto generalmente demora un par de segundos para conexiones veloces o ms dependiendo de su velocidad de conexin","safari-notification":"Micrfono no funciona con Chrome. Por favor copie el enlace del mail y pguelo en Safari","permission-refresh":"If you already changed permissions you need to refresh the page.","permission-change-notification":"Please change your browser\'s microphone permissions in order to answer these questions."}')}},e={};function s(i){var a=e[i];if(void 0!==a)return a.exports;var r=e[i]={id:i,loaded:!1,exports:{}};return t[i].call(r.exports,r,r.exports,s),r.loaded=!0,r.exports}s.m=t,function(){var t=[];s.O=function(e,i,a,r){if(!i){var n=1/0;for(h=0;h<t.length;h++){i=t[h][0],a=t[h][1],r=t[h][2];for(var o=!0,l=0;l<i.length;l++)(!1&r||n>=r)&&Object.keys(s.O).every((function(t){return s.O[t](i[l])}))?i.splice(l--,1):(o=!1,r<n&&(n=r));if(o){t.splice(h--,1);var c=a();void 0!==c&&(e=c)}}return e}r=r||0;for(var h=t.length;h>0&&t[h-1][2]>r;h--)t[h]=t[h-1];t[h]=[i,a,r]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var i in e)s.o(e,i)&&!s.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){s.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){s.p="/reproschema-ui/"}(),function(){var t={524:0};s.O.j=function(e){return 0===t[e]};var e=function(e,i){var a,r,n=i[0],o=i[1],l=i[2],c=0;if(n.some((function(e){return 0!==t[e]}))){for(a in o)s.o(o,a)&&(s.m[a]=o[a]);if(l)var h=l(s)}for(e&&e(i);c<n.length;c++)r=n[c],s.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return s.O(h)},i=self["webpackChunkschema_ui"]=self["webpackChunkschema_ui"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=s.O(void 0,[504],(function(){return s(8833)}));i=s.O(i)})();
//# sourceMappingURL=app.20df9620.js.map